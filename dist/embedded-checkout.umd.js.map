{"version":3,"sources":["webpack://checkoutKit/webpack/universalModuleDefinition","webpack://checkoutKit/webpack/bootstrap","webpack://checkoutKit/./node_modules/tslib/tslib.es6.js","webpack://checkoutKit/./src/embedded-checkout/iframe-content/embedded-content-events.ts","webpack://checkoutKit/./src/embedded-checkout/iframe-event-listener.ts","webpack://checkoutKit/./src/embedded-checkout/iframe-event-poster.ts","webpack://checkoutKit/./node_modules/iframe-resizer/js/iframeResizer.contentWindow.js","webpack://checkoutKit/./src/embedded-checkout/embedded-checkout.ts","webpack://checkoutKit/./src/embedded-checkout/loading-indicator.ts","webpack://checkoutKit/./src/embedded-checkout/errors/not-embeddable-error.ts","webpack://checkoutKit/./src/embedded-checkout/resizable-iframe-creator.ts","webpack://checkoutKit/./src/embedded-checkout/embed-checkout.ts","webpack://checkoutKit/./src/embedded-checkout/index.ts","webpack://checkoutKit/./src/embedded-checkout/embedded-checkout-events.ts","webpack://checkoutKit/./node_modules/iframe-resizer/index.js","webpack://checkoutKit/./node_modules/iframe-resizer/js/index.js","webpack://checkoutKit/./node_modules/iframe-resizer/js/iframeResizer.js","webpack://checkoutKit/./src/common/utility/bind-decorator.ts","webpack://checkoutKit/./src/common/error/errors/invalid-argument-error.ts","webpack://checkoutKit/./src/common/error/errors/standard-error.ts","webpack://checkoutKit/./src/common/utility/set-prototype-of.ts","webpack://checkoutKit/./src/embedded-checkout/parse-origin.ts","webpack://checkoutKit/./src/embedded-checkout/is-iframe-event.ts"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","__extends","__assign","__rest","__decorate","__param","__metadata","__awaiter","__generator","__exportStar","__values","__read","__spread","__await","__asyncGenerator","__asyncDelegator","__asyncValues","__makeTemplateObject","__importStar","__importDefault","extendStatics","b","setPrototypeOf","__proto__","Array","__","this","constructor","assign","arguments","length","apply","e","indexOf","getOwnPropertySymbols","decorators","target","desc","getOwnPropertyDescriptor","Reflect","decorate","paramIndex","decorator","metadataKey","metadataValue","metadata","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","result","done","then","body","f","y","g","_","label","sent","trys","ops","verb","throw","return","iterator","v","op","TypeError","pop","push","ar","error","concat","asyncIterator","q","a","resume","fulfill","settle","shift","cooked","raw","mod","k","default","EmbeddedContentEventType","IframeEventListener","sourceOrigin","_sourceOrigin","_parse_origin__WEBPACK_IMPORTED_MODULE_3__","_isListening","_listeners","listen","addEventListener","_handleMessage","stopListen","removeEventListener","addListener","type","listener","listeners","removeListener","index","splice","trigger","event","forEach","origin","_is_iframe_event__WEBPACK_IMPORTED_MODULE_2__","data","tslib__WEBPACK_IMPORTED_MODULE_0__","_common_utility__WEBPACK_IMPORTED_MODULE_1__","_parse_origin__WEBPACK_IMPORTED_MODULE_0__","IframeEventPoster","targetOrigin","_targetWindow","_targetOrigin","post","Error","postMessage","setTarget","undefined","autoResize","base","bodyBackground","bodyMargin","bodyMarginStr","bodyObserver","bodyPadding","calculateWidth","doubleEventList","resize","click","eventCancelTimer","firstRun","height","heightCalcModeDefault","heightCalcMode","initLock","initMsg","inPageLinks","interval","intervalTimer","logging","msgID","msgIdLen","myID","resetRequiredMethods","max","min","bodyScroll","documentElementScroll","resizeFrom","sendPermit","parent","targetOriginDefault","tolerance","triggerLocked","triggerLockedTimer","throttledTimer","width","widthCalcModeDefault","widthCalcMode","win","messageCallback","warn","readyCallback","pageInfoCallback","customCalcMethods","document","documentElement","offsetHeight","scrollWidth","eventHandlersByName","passiveSupported","options","passive","once","noop","getNow","Date","now","getTime","getHeight","bodyOffset","getComputedStyle","offset","scrollHeight","custom","documentElementOffset","Math","getAllMeasurements","grow","lowestElement","getMaxElement","getAllElements","taggedElement","getTaggedElements","getWidth","offsetWidth","scroll","rightMostElement","sizeIFrameThrottled","func","context","args","timeout","previous","later","remaining","clearTimeout","setTimeout","throttle","sizeIFrame","receiver","chkLateLoaded","el","evt","attachEvent","detachEvent","capitalizeFirstLetter","string","charAt","toUpperCase","slice","formatLogMsg","msg","log","console","init","strBool","str","substr","split","Number","enable","readDataFromParent","location","href","setupCustomCalcMethods","calcMode","calcFunc","iFrameResizer","JSON","stringify","heightCalculationMethod","widthCalculationMethod","readData","readDataFromPage","setBodyStyle","attr","chkCSS","setMargin","clearFix","createElement","style","clear","display","appendChild","injectClearFixIntoBodyElement","checkHeightMode","checkWidthMode","parentIFrame","startEventListeners","stopEventListeners","close","sendMsg","getId","getPageInfo","callback","moveToAnchor","hash","findTarget","reset","resetIFrame","scrollTo","x","scrollToOffset","sendMessage","setHeightCalculationMethod","setWidthCalculationMethod","setTargetOrigin","size","customHeight","customWidth","valString","sendSize","getElementPosition","elPosition","getBoundingClientRect","pagePosition","pageXOffset","scrollLeft","pageYOffset","scrollTop","parseInt","left","top","hashData","decodeURIComponent","getElementById","getElementsByName","jumpPosition","jumpToTarget","checkLocationHash","querySelectorAll","getAttribute","preventDefault","setupInPageLinks","manageTriggerEvent","add","eventName","handleEvent","eventType","remove","eventNames","map","method","manageEventListeners","checkCalcMode","calcModeDefault","modes","forceIntervalTimer","MutationObserver","WebKitMutationObserver","initInterval","addImageLoadListners","mutation","addImageLoadListener","element","complete","src","imageLoaded","imageError","elements","attributeName","removeImageLoadListener","removeFromArray","imageEventTriggered","typeDesc","mutationObserved","mutations","observer","querySelector","observe","attributes","attributeOldValue","characterData","characterDataOldValue","childList","subtree","createMutationObserver","disconnect","setupBodyMutationObserver","setupMutationObserver","clearInterval","setInterval","abs","prop","retVal","defaultView","test","runtimeStyle","currentStyle","pixelLeft","convertUnitsToPxForIE8","side","elementsLength","elVal","maxVal","Side","timer","chkEventThottle","dimention","tag","triggerEvent","triggerEventDesc","currentHeight","currentWidth","checkTolarance","isSizeChangeDetected","lockTrigger","resetPage","triggerReset","hcm","message","sendToParent","processRequestFromParent","source","getData","inPageLink","pageInfo","msgBody","parse","getMessageType","isInitMsg","true","false","callFromParent","messageType","jQuery","readyState","EmbeddedCheckout","_iframeCreator","_messageListener","_messagePoster","_loadingIndicator","_options","_this","_isAttached","onComplete","embedded_checkout_events","CheckoutComplete","onError","CheckoutError","onLoad","CheckoutLoaded","onFrameLoad","FrameLoaded","onSignOut","SignedOut","_configureStyles","attach","show","containerId","createFrame","url","iframe","_iframe","hide","catch","FrameError","payload","detach","parentNode","removeChild","contentWindow","styles","embedded_content_events","StyleConfigured","DEFAULT_STYLES","color","backgroundColor","ROTATION_ANIMATION","LoadingIndicator","_styles","tslib_es6","_defineAnimation","_container","_buildContainer","_indicator","_buildIndicator","parentId","parent_1","visibility","opacity","handleTransitionEnd","container","bottom","position","right","transition","indicator","borderRadius","border","borderColor","margin","transform","transformStyle","animation","id","head","sheet","CSSStyleSheet","insertRule","_super","NotEmbeddableError","ResizableIframeCreator","_a","not_embeddable_error","allowPaymentRequest","_toResizableFrame","timeoutInterval","handleMessage","parse_origin","is_iframe_event","teardown","iframes","iframe_resizer","scrolling","sizeWidth","embedCheckout","embedded_checkout","resizable_iframe_creator","iframe_event_listener","iframe_event_poster","loading_indicator","loadingIndicator","EmbeddedCheckoutEventType","iframeResizer","iframeResizerContentWindow","count","logEnabled","hiddenCheckEnabled","msgHeaderLen","msgId","requestAnimationFrame","settings","defaults","bodyMarginV1","checkOrigin","enablePublicMethods","maxHeight","Infinity","maxWidth","minHeight","minWidth","sizeHeight","warningTimeout","closedCallback","initCallback","resizedCallback","scrollCallback","frameTimer","$","fn","iFrameResize","filter","each","setupIFrame","end","info","createJQueryPublicMethod","obj","formatLogHeader","iframeId","retStr","self","getMyID","isLogEnabled","output","enabled","iFrameListener","resizeIFrame","ensureInRange","syncResize","setSize","messageData","setPagePosition","Dimension","dimension","toLowerCase","getMsgBody","sendPageInfoToIframe","time","frameId","debounceFrameEvents","bodyPosition","iFramePosition","iframeHeight","iframeWidth","clientHeight","innerHeight","clientWidth","innerWidth","offsetTop","offsetLeft","getPagePosition","floor","scrollRequestFromChild","addOffset","newPosition","unsetPagePosition","funcName","val","chkCallback","createOutgoingMsg","iFrameReadyMsgReceived","processMsg","loaded","retCode","isMessageFromMetaParent","retBool","hasSettings","checkIFrameExists","checkList","remoteHost","checkSingle","isMessageFromIFrame","closeRequestCallback","closeIFrame","forwardMsgFromIFrame","setListener","sendPageInfo","stop","stopPageInfo","startPageInfoMonitor","actionMsg","removeIframeListeners","chkZero","checkIFrames","checkIFrame","settingId","chkDimension","offsetParent","isVisible","debouce","fixHiddenIFrames","processDimension","setDimension","doNotSync","calleeMsg","noResponseWarning","errorShown","postMessageToIFrame","msgTimeout","newId","ensureHasId","join","checkOptions","option","copyOptions","getTargetOrigin","processOptions","overflow","setScrolling","addStyle","chkMinMax","setLimits","resetRequertMethod","checkReset","Function","removeListeners","anchor","resizeIFrames","sendTriggerMsg","tabVisible","visibilityState","isIFrameResizeEnabled","tagName","chkType","iFrames","vendors","setupRequestAnimationFrame","warnDeprecatedOptions","bindDecorator","descriptor","bindMethodDecorator","decoratedTarget","class_1","getOwnPropertyNames","bindClassDecorator","boundMethod","set","InvalidArgumentError","standard_error_StandardError","StandardError","_newTarget","captureStackTrace","stack","parseOrigin","_common_error_errors__WEBPACK_IMPORTED_MODULE_0__","protocol","hostname","port","isIframeEvent"],"mappings":"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","file":"embedded-checkout.umd.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"checkoutKit\"] = factory();\n\telse\n\t\troot[\"checkoutKit\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 248);\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import EmbeddedCheckoutStyles from '../embedded-checkout-styles';\n\nexport enum EmbeddedContentEventType {\n    StyleConfigured = 'STYLE_CONFIGURED',\n}\n\nexport interface EmbeddedContentEventMap {\n    [EmbeddedContentEventType.StyleConfigured]: EmbeddedContentStyleConfiguredEvent;\n}\n\nexport type EmbeddedContentEvent = (\n    EmbeddedContentStyleConfiguredEvent\n);\n\nexport interface EmbeddedContentStyleConfiguredEvent {\n    type: EmbeddedContentEventType.StyleConfigured;\n    payload: EmbeddedCheckoutStyles;\n}\n","import { bindDecorator as bind } from '../common/utility';\n\nimport { IframeEventMap } from './iframe-event';\nimport isIframeEvent from './is-iframe-event';\nimport parseOrigin from './parse-origin';\n\nexport default class IframeEventListener<TEventMap extends IframeEventMap<keyof TEventMap>> {\n    private _isListening: boolean;\n    private _listeners: EventListeners<TEventMap>;\n    private _sourceOrigin: string;\n\n    constructor(\n        sourceOrigin: string\n    ) {\n        this._sourceOrigin = parseOrigin(sourceOrigin);\n        this._isListening = false;\n        this._listeners = {};\n    }\n\n    listen(): void {\n        if (this._isListening) {\n            return;\n        }\n\n        this._isListening = true;\n\n        window.addEventListener('message', this._handleMessage);\n    }\n\n    stopListen(): void {\n        if (!this._isListening) {\n            return;\n        }\n\n        this._isListening = false;\n\n        window.removeEventListener('message', this._handleMessage);\n    }\n\n    addListener<TType extends keyof TEventMap>(type: TType, listener: (event: TEventMap[TType]) => void): void {\n        let listeners = this._listeners[type];\n\n        if (!listeners) {\n            this._listeners[type] = listeners = [];\n        }\n\n        listeners.push(listener);\n    }\n\n    removeListener<TType extends keyof TEventMap>(type: TType, listener: (event: TEventMap[TType]) => void): void {\n        const listeners = this._listeners[type];\n\n        if (!listeners) {\n            return;\n        }\n\n        const index = listeners.indexOf(listener);\n\n        if (index >= 0) {\n            listeners.splice(index, 1);\n        }\n    }\n\n    trigger<TType extends keyof TEventMap>(event: TEventMap[TType]): void {\n        const listeners = this._listeners[event.type];\n\n        if (!listeners) {\n            return;\n        }\n\n        listeners.forEach(listener => listener(event));\n    }\n\n    @bind\n    private _handleMessage(event: MessageEvent): void {\n        if ((event.origin !== this._sourceOrigin) || !isIframeEvent(event.data, event.data.type)) {\n            return;\n        }\n\n        this.trigger(event.data);\n    }\n}\n\ntype EventListeners<TEventMap> = {\n    [key in keyof TEventMap]?: Array<(event: TEventMap[keyof TEventMap]) => void>;\n};\n","import parseOrigin from './parse-origin';\n\nexport default class IframeEventPoster<TEvent> {\n    private _targetOrigin: string;\n\n    constructor(\n        targetOrigin: string,\n        private _targetWindow?: Window\n    ) {\n        this._targetOrigin = parseOrigin(targetOrigin);\n    }\n\n    post(event: TEvent): void {\n        if (window === this._targetWindow) {\n            return;\n        }\n\n        if (!this._targetWindow) {\n            throw new Error('Unable to post message becauset target window is not set.');\n        }\n\n        this._targetWindow.postMessage(event, this._targetOrigin);\n    }\n\n    setTarget(window: Window) {\n        this._targetWindow = window;\n    }\n}\n","/*\n * File: iframeResizer.contentWindow.js\n * Desc: Include this file in any page being loaded into an iframe\n *       to force the iframe to resize to the content size.\n * Requires: iframeResizer.js on host page.\n * Doc: https://github.com/davidjbradshaw/iframe-resizer\n * Author: David J. Bradshaw - dave@bradshaw.net\n * Contributor: Jure Mav - jure.mav@gmail.com\n * Contributor: Ian Caunce - ian@hallnet.co.uk\n */\n\n\n;(function(undefined) {\n  'use strict';\n\n  if(typeof window === 'undefined') return; // don't run for server side render\n\n  var\n    autoResize            = true,\n    base                  = 10,\n    bodyBackground        = '',\n    bodyMargin            = 0,\n    bodyMarginStr         = '',\n    bodyObserver          = null,\n    bodyPadding           = '',\n    calculateWidth        = false,\n    doubleEventList       = {'resize':1,'click':1},\n    eventCancelTimer      = 128,\n    firstRun              = true,\n    height                = 1,\n    heightCalcModeDefault = 'bodyOffset',\n    heightCalcMode        = heightCalcModeDefault,\n    initLock              = true,\n    initMsg               = '',\n    inPageLinks           = {},\n    interval              = 32,\n    intervalTimer         = null,\n    logging               = false,\n    msgID                 = '[iFrameSizer]',  //Must match host page msg ID\n    msgIdLen              = msgID.length,\n    myID                  = '',\n    observer              = null,\n    resetRequiredMethods  = {max:1,min:1,bodyScroll:1,documentElementScroll:1},\n    resizeFrom            = 'child',\n    sendPermit            = true,\n    target                = window.parent,\n    targetOriginDefault   = '*',\n    tolerance             = 0,\n    triggerLocked         = false,\n    triggerLockedTimer    = null,\n    throttledTimer        = 16,\n    width                 = 1,\n    widthCalcModeDefault  = 'scroll',\n    widthCalcMode         = widthCalcModeDefault,\n    win                   = window,\n    messageCallback       = function() { warn('MessageCallback function not defined'); },\n    readyCallback         = function() {},\n    pageInfoCallback      = function() {},\n    customCalcMethods     = {\n      height: function() {\n        warn('Custom height calculation function not defined');\n        return document.documentElement.offsetHeight;\n      },\n      width: function() {\n        warn('Custom width calculation function not defined');\n        return document.body.scrollWidth;\n      }\n    },\n    eventHandlersByName   = {},\n    passiveSupported = false,\n    onceSupported = false;\n\n  function noop() {}\n\n  try {\n    var options = Object.create({}, {\n      passive: {get: function() { passiveSupported = true; }},\n      once: {get: function() { onceSupported = true; }},\n    });\n    window.addEventListener('test', noop, options);\n    window.removeEventListener('test', noop, options);\n  } catch (e) { /* */ }\n\n  function addEventListener(el,evt,func,options) {\n    /* istanbul ignore else */ // Not testable in phantomJS\n    if ('addEventListener' in window) {\n      el.addEventListener(evt,func, passiveSupported ? (options||{}) : false);\n    } else if ('attachEvent' in window) { //IE\n      el.attachEvent('on'+evt,func);\n    }\n  }\n\n  function removeEventListener(el,evt,func) {\n    /* istanbul ignore else */ // Not testable in phantomJS\n    if ('removeEventListener' in window) {\n      el.removeEventListener(evt,func, false);\n    } else if ('detachEvent' in window) { //IE\n      el.detachEvent('on'+evt,func);\n    }\n  }\n\n  function capitalizeFirstLetter(string) {\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  }\n\n  //Based on underscore.js\n  function throttle(func) {\n    var\n      context, args, result,\n      timeout = null,\n      previous = 0,\n      later = function() {\n        previous = getNow();\n        timeout = null;\n        result = func.apply(context, args);\n        if (!timeout) {\n          context = args = null;\n        }\n      };\n\n    return function() {\n      var now = getNow();\n\n      if (!previous) {\n        previous = now;\n      }\n\n      var remaining = throttledTimer - (now - previous);\n\n      context = this;\n      args = arguments;\n\n      if (remaining <= 0 || remaining > throttledTimer) {\n        if (timeout) {\n          clearTimeout(timeout);\n          timeout = null;\n        }\n\n        previous = now;\n        result = func.apply(context, args);\n\n        if (!timeout) {\n          context = args = null;\n        }\n\n      } else if (!timeout) {\n        timeout = setTimeout(later, remaining);\n      }\n\n      return result;\n    };\n  }\n\n  var getNow = Date.now || function() {\n    /* istanbul ignore next */ // Not testable in PhantonJS\n    return new Date().getTime();\n  };\n\n  function formatLogMsg(msg) {\n    return msgID + '[' + myID + ']' + ' ' + msg;\n  }\n\n  function log(msg) {\n    if (logging && ('object' === typeof window.console)) {\n      console.log(formatLogMsg(msg));\n    }\n  }\n\n  function warn(msg) {\n    if ('object' === typeof window.console) {\n      console.warn(formatLogMsg(msg));\n    }\n  }\n\n\n  function init() {\n    readDataFromParent();\n    log('Initialising iFrame ('+location.href+')');\n    readDataFromPage();\n    setMargin();\n    setBodyStyle('background',bodyBackground);\n    setBodyStyle('padding',bodyPadding);\n    injectClearFixIntoBodyElement();\n    checkHeightMode();\n    checkWidthMode();\n    stopInfiniteResizingOfIFrame();\n    setupPublicMethods();\n    startEventListeners();\n    inPageLinks = setupInPageLinks();\n    sendSize('init','Init message from host page');\n    readyCallback();\n  }\n\n  function readDataFromParent() {\n\n    function strBool(str) {\n      return 'true' === str ? true : false;\n    }\n\n    var data = initMsg.substr(msgIdLen).split(':');\n\n    myID               = data[0];\n    bodyMargin         = (undefined !== data[1]) ? Number(data[1])   : bodyMargin; //For V1 compatibility\n    calculateWidth     = (undefined !== data[2]) ? strBool(data[2])  : calculateWidth;\n    logging            = (undefined !== data[3]) ? strBool(data[3])  : logging;\n    interval           = (undefined !== data[4]) ? Number(data[4])   : interval;\n    autoResize         = (undefined !== data[6]) ? strBool(data[6])  : autoResize;\n    bodyMarginStr      = data[7];\n    heightCalcMode     = (undefined !== data[8]) ? data[8]           : heightCalcMode;\n    bodyBackground     = data[9];\n    bodyPadding        = data[10];\n    tolerance          = (undefined !== data[11]) ? Number(data[11]) : tolerance;\n    inPageLinks.enable = (undefined !== data[12]) ? strBool(data[12]): false;\n    resizeFrom         = (undefined !== data[13]) ? data[13]         : resizeFrom;\n    widthCalcMode      = (undefined !== data[14]) ? data[14]         : widthCalcMode;\n  }\n\n  function readDataFromPage() {\n    function readData() {\n      var data = window.iFrameResizer;\n\n      log('Reading data from page: ' + JSON.stringify(data));\n\n      messageCallback     = ('messageCallback'         in data) ? data.messageCallback         : messageCallback;\n      readyCallback       = ('readyCallback'           in data) ? data.readyCallback           : readyCallback;\n      targetOriginDefault = ('targetOrigin'            in data) ? data.targetOrigin            : targetOriginDefault;\n      heightCalcMode      = ('heightCalculationMethod' in data) ? data.heightCalculationMethod : heightCalcMode;\n      widthCalcMode       = ('widthCalculationMethod'  in data) ? data.widthCalculationMethod  : widthCalcMode;\n    }\n\n    function setupCustomCalcMethods(calcMode, calcFunc) {\n      if ('function' === typeof calcMode) {\n        log('Setup custom ' + calcFunc + 'CalcMethod');\n        customCalcMethods[calcFunc] = calcMode;\n        calcMode = 'custom';\n      }\n\n      return calcMode;\n    }\n\n    if(('iFrameResizer' in window) && (Object === window.iFrameResizer.constructor)) {\n      readData();\n      heightCalcMode = setupCustomCalcMethods(heightCalcMode, 'height');\n      widthCalcMode  = setupCustomCalcMethods(widthCalcMode,  'width');\n    }\n\n    log('TargetOrigin for parent set to: ' + targetOriginDefault);\n  }\n\n\n  function chkCSS(attr,value) {\n    if (-1 !== value.indexOf('-')) {\n      warn('Negative CSS value ignored for '+attr);\n      value='';\n    }\n    return value;\n  }\n\n  function setBodyStyle(attr,value) {\n    if ((undefined !== value) && ('' !== value) && ('null' !== value)) {\n      document.body.style[attr] = value;\n      log('Body '+attr+' set to \"'+value+'\"');\n    }\n  }\n\n  function setMargin() {\n    //If called via V1 script, convert bodyMargin from int to str\n    if (undefined === bodyMarginStr) {\n      bodyMarginStr = bodyMargin+'px';\n    }\n\n    setBodyStyle('margin',chkCSS('margin',bodyMarginStr));\n  }\n\n  function stopInfiniteResizingOfIFrame() {\n    document.documentElement.style.height = '';\n    document.body.style.height = '';\n    log('HTML & body height set to \"auto\"');\n  }\n\n\n  function manageTriggerEvent(options) {\n\n    var listener = {\n      add:    function(eventName) {\n        function handleEvent() {\n          sendSize(options.eventName,options.eventType);\n        }\n\n        eventHandlersByName[eventName] = handleEvent;\n\n        addEventListener(window,eventName,handleEvent,{passive:true});\n      },\n      remove: function(eventName) {\n        var handleEvent = eventHandlersByName[eventName];\n        delete eventHandlersByName[eventName];\n\n        removeEventListener(window,eventName,handleEvent);\n      }\n    };\n\n    if(options.eventNames && Array.prototype.map) {\n      options.eventName = options.eventNames[0];\n      options.eventNames.map(listener[options.method]);\n    } else {\n      listener[options.method](options.eventName);\n    }\n\n    log(capitalizeFirstLetter(options.method) + ' event listener: ' + options.eventType);\n  }\n\n  function manageEventListeners(method) {\n    manageTriggerEvent({method:method, eventType: 'Animation Start',           eventNames: ['animationstart','webkitAnimationStart'] });\n    manageTriggerEvent({method:method, eventType: 'Animation Iteration',       eventNames: ['animationiteration','webkitAnimationIteration'] });\n    manageTriggerEvent({method:method, eventType: 'Animation End',             eventNames: ['animationend','webkitAnimationEnd'] });\n    manageTriggerEvent({method:method, eventType: 'Input',                     eventName:  'input' });\n    manageTriggerEvent({method:method, eventType: 'Mouse Up',                  eventName:  'mouseup' });\n    manageTriggerEvent({method:method, eventType: 'Mouse Down',                eventName:  'mousedown' });\n    manageTriggerEvent({method:method, eventType: 'Orientation Change',        eventName:  'orientationchange' });\n    manageTriggerEvent({method:method, eventType: 'Print',                     eventName:  ['afterprint', 'beforeprint'] });\n    manageTriggerEvent({method:method, eventType: 'Ready State Change',        eventName:  'readystatechange' });\n    manageTriggerEvent({method:method, eventType: 'Touch Start',               eventName:  'touchstart' });\n    manageTriggerEvent({method:method, eventType: 'Touch End',                 eventName:  'touchend' });\n    manageTriggerEvent({method:method, eventType: 'Touch Cancel',              eventName:  'touchcancel' });\n    manageTriggerEvent({method:method, eventType: 'Transition Start',          eventNames: ['transitionstart','webkitTransitionStart','MSTransitionStart','oTransitionStart','otransitionstart'] });\n    manageTriggerEvent({method:method, eventType: 'Transition Iteration',      eventNames: ['transitioniteration','webkitTransitionIteration','MSTransitionIteration','oTransitionIteration','otransitioniteration'] });\n    manageTriggerEvent({method:method, eventType: 'Transition End',            eventNames: ['transitionend','webkitTransitionEnd','MSTransitionEnd','oTransitionEnd','otransitionend'] });\n    if('child' === resizeFrom) {\n      manageTriggerEvent({method:method, eventType: 'IFrame Resized',        eventName:  'resize' });\n    }\n  }\n\n  function checkCalcMode(calcMode,calcModeDefault,modes,type) {\n    if (calcModeDefault !== calcMode) {\n      if (!(calcMode in modes)) {\n        warn(calcMode + ' is not a valid option for '+type+'CalculationMethod.');\n        calcMode=calcModeDefault;\n      }\n      log(type+' calculation method set to \"'+calcMode+'\"');\n    }\n\n    return calcMode;\n  }\n\n  function checkHeightMode() {\n    heightCalcMode = checkCalcMode(heightCalcMode,heightCalcModeDefault,getHeight,'height');\n  }\n\n  function checkWidthMode() {\n    widthCalcMode = checkCalcMode(widthCalcMode,widthCalcModeDefault,getWidth,'width');\n  }\n\n  function startEventListeners() {\n    if ( true === autoResize ) {\n      manageEventListeners('add');\n      setupMutationObserver();\n    }\n    else {\n      log('Auto Resize disabled');\n    }\n  }\n\n  function stopMsgsToParent() {\n    log('Disable outgoing messages');\n    sendPermit = false;\n  }\n\n  function removeMsgListener() {\n    log('Remove event listener: Message');\n    removeEventListener(window, 'message', receiver);\n  }\n\n  function disconnectMutationObserver() {\n    if (null !== bodyObserver) {\n      /* istanbul ignore next */ // Not testable in PhantonJS\n      bodyObserver.disconnect();\n    }\n  }\n\n  function stopEventListeners() {\n    manageEventListeners('remove');\n    disconnectMutationObserver();\n    clearInterval(intervalTimer);\n  }\n\n  function teardown() {\n    stopMsgsToParent();\n    removeMsgListener();\n    if (true === autoResize) stopEventListeners();\n  }\n\n  function injectClearFixIntoBodyElement() {\n    var clearFix = document.createElement('div');\n    clearFix.style.clear   = 'both';\n    clearFix.style.display = 'block'; //Guard against this having been globally redefined in CSS.\n    document.body.appendChild(clearFix);\n  }\n\n  function setupInPageLinks() {\n\n    function getPagePosition () {\n      return {\n        x: (window.pageXOffset !== undefined) ? window.pageXOffset : document.documentElement.scrollLeft,\n        y: (window.pageYOffset !== undefined) ? window.pageYOffset : document.documentElement.scrollTop\n      };\n    }\n\n    function getElementPosition(el) {\n      var\n        elPosition   = el.getBoundingClientRect(),\n        pagePosition = getPagePosition();\n\n      return {\n        x: parseInt(elPosition.left,10) + parseInt(pagePosition.x,10),\n        y: parseInt(elPosition.top,10)  + parseInt(pagePosition.y,10)\n      };\n    }\n\n    function findTarget(location) {\n      function jumpToTarget(target) {\n        var jumpPosition = getElementPosition(target);\n\n        log('Moving to in page link (#'+hash+') at x: '+jumpPosition.x+' y: '+jumpPosition.y);\n        sendMsg(jumpPosition.y, jumpPosition.x, 'scrollToOffset'); // X&Y reversed at sendMsg uses height/width\n      }\n\n      var\n        hash     = location.split('#')[1] || location, //Remove # if present\n        hashData = decodeURIComponent(hash),\n        target   = document.getElementById(hashData) || document.getElementsByName(hashData)[0];\n\n      if (undefined !== target) {\n        jumpToTarget(target);\n      } else {\n        log('In page link (#' + hash + ') not found in iFrame, so sending to parent');\n        sendMsg(0,0,'inPageLink','#'+hash);\n      }\n    }\n\n    function checkLocationHash() {\n      if ('' !== location.hash && '#' !== location.hash) {\n        findTarget(location.href);\n      }\n    }\n\n    function bindAnchors() {\n      function setupLink(el) {\n        function linkClicked(e) {\n          e.preventDefault();\n\n          /*jshint validthis:true */\n          findTarget(this.getAttribute('href'));\n        }\n\n        if ('#' !== el.getAttribute('href')) {\n          addEventListener(el,'click',linkClicked);\n        }\n      }\n\n      Array.prototype.forEach.call( document.querySelectorAll( 'a[href^=\"#\"]' ), setupLink );\n    }\n\n    function bindLocationHash() {\n      addEventListener(window,'hashchange',checkLocationHash);\n    }\n\n    function initCheck() { //check if page loaded with location hash after init resize\n      setTimeout(checkLocationHash,eventCancelTimer);\n    }\n\n    function enableInPageLinks() {\n      /* istanbul ignore else */ // Not testable in phantonJS\n      if(Array.prototype.forEach && document.querySelectorAll) {\n        log('Setting up location.hash handlers');\n        bindAnchors();\n        bindLocationHash();\n        initCheck();\n      } else {\n        warn('In page linking not fully supported in this browser! (See README.md for IE8 workaround)');\n      }\n    }\n\n    if(inPageLinks.enable) {\n      enableInPageLinks();\n    } else {\n      log('In page linking not enabled');\n    }\n\n    return {\n      findTarget:findTarget\n    };\n  }\n\n  function setupPublicMethods() {\n    log('Enable public methods');\n\n    win.parentIFrame = {\n\n      autoResize: function autoResizeF(resize) {\n        if (true === resize && false === autoResize) {\n          autoResize=true;\n          startEventListeners();\n          //sendSize('autoResize','Auto Resize enabled');\n        } else if (false === resize && true === autoResize) {\n          autoResize=false;\n          stopEventListeners();\n        }\n\n        return autoResize;\n      },\n\n      close: function closeF() {\n        sendMsg(0,0,'close');\n        teardown();\n      },\n\n      getId: function getIdF() {\n        return myID;\n      },\n\n      getPageInfo: function getPageInfoF(callback) {\n        if ('function' === typeof callback) {\n          pageInfoCallback = callback;\n          sendMsg(0,0,'pageInfo');\n        } else {\n          pageInfoCallback = function() {};\n          sendMsg(0,0,'pageInfoStop');\n        }\n      },\n\n      moveToAnchor: function moveToAnchorF(hash) {\n        inPageLinks.findTarget(hash);\n      },\n\n      reset: function resetF() {\n        resetIFrame('parentIFrame.reset');\n      },\n\n      scrollTo: function scrollToF(x,y) {\n        sendMsg(y,x,'scrollTo'); // X&Y reversed at sendMsg uses height/width\n      },\n\n      scrollToOffset: function scrollToF(x,y) {\n        sendMsg(y,x,'scrollToOffset'); // X&Y reversed at sendMsg uses height/width\n      },\n\n      sendMessage: function sendMessageF(msg,targetOrigin) {\n        sendMsg(0,0,'message',JSON.stringify(msg),targetOrigin);\n      },\n\n      setHeightCalculationMethod: function setHeightCalculationMethodF(heightCalculationMethod) {\n        heightCalcMode = heightCalculationMethod;\n        checkHeightMode();\n      },\n\n      setWidthCalculationMethod: function setWidthCalculationMethodF(widthCalculationMethod) {\n        widthCalcMode = widthCalculationMethod;\n        checkWidthMode();\n      },\n\n      setTargetOrigin: function setTargetOriginF(targetOrigin) {\n        log('Set targetOrigin: '+targetOrigin);\n        targetOriginDefault = targetOrigin;\n      },\n\n      size: function sizeF(customHeight, customWidth) {\n        var valString = ''+(customHeight?customHeight:'')+(customWidth?','+customWidth:'');\n        //lockTrigger();\n        sendSize('size','parentIFrame.size('+valString+')', customHeight, customWidth);\n      }\n    };\n  }\n\n  function initInterval() {\n    if ( 0 !== interval ) {\n      log('setInterval: '+interval+'ms');\n      intervalTimer = setInterval(function() {\n        sendSize('interval','setInterval: '+interval);\n      },Math.abs(interval));\n    }\n  }\n\n  /* istanbul ignore next */  //Not testable in PhantomJS\n  function setupBodyMutationObserver() {\n    function addImageLoadListners(mutation) {\n      function addImageLoadListener(element) {\n        if (false === element.complete) {\n          log('Attach listeners to ' + element.src);\n          element.addEventListener('load', imageLoaded, false);\n          element.addEventListener('error', imageError, false);\n          elements.push(element);\n        }\n      }\n\n      if (mutation.type === 'attributes' && mutation.attributeName === 'src') {\n        addImageLoadListener(mutation.target);\n      } else if (mutation.type === 'childList') {\n        Array.prototype.forEach.call(\n          mutation.target.querySelectorAll('img'),\n          addImageLoadListener\n        );\n      }\n    }\n\n    function removeFromArray(element) {\n      elements.splice(elements.indexOf(element),1);\n    }\n\n    function removeImageLoadListener(element) {\n      log('Remove listeners from ' + element.src);\n      element.removeEventListener('load', imageLoaded, false);\n      element.removeEventListener('error', imageError, false);\n      removeFromArray(element);\n    }\n\n    function imageEventTriggered(event,type,typeDesc) {\n      removeImageLoadListener(event.target);\n      sendSize(type, typeDesc + ': ' + event.target.src, undefined, undefined);\n    }\n\n    function imageLoaded(event) {\n      imageEventTriggered(event,'imageLoad','Image loaded');\n    }\n\n    function imageError(event) {\n      imageEventTriggered(event,'imageLoadFailed','Image load failed');\n    }\n\n    function mutationObserved(mutations) {\n      sendSize('mutationObserver','mutationObserver: ' + mutations[0].target + ' ' + mutations[0].type);\n\n      //Deal with WebKit asyncing image loading when tags are injected into the page\n      mutations.forEach(addImageLoadListners);\n    }\n\n    function createMutationObserver() {\n      var\n        target = document.querySelector('body'),\n\n        config = {\n          attributes            : true,\n          attributeOldValue     : false,\n          characterData         : true,\n          characterDataOldValue : false,\n          childList             : true,\n          subtree               : true\n        };\n\n      observer = new MutationObserver(mutationObserved);\n\n      log('Create body MutationObserver');\n      observer.observe(target, config);\n\n      return observer;\n    }\n\n    var\n      elements         = [],\n      MutationObserver = window.MutationObserver || window.WebKitMutationObserver,\n      observer         = createMutationObserver();\n\n    return {\n      disconnect: function () {\n        if ('disconnect' in observer) {\n          log('Disconnect body MutationObserver');\n          observer.disconnect();\n          elements.forEach(removeImageLoadListener);\n        }\n      }\n    };\n  }\n\n  function setupMutationObserver() {\n    var\tforceIntervalTimer = 0 > interval;\n\n    /* istanbul ignore if */ // Not testable in PhantomJS\n    if (window.MutationObserver || window.WebKitMutationObserver) {\n      if (forceIntervalTimer) {\n        initInterval();\n      } else {\n        bodyObserver = setupBodyMutationObserver();\n      }\n    } else {\n      log('MutationObserver not supported in this browser!');\n      initInterval();\n    }\n  }\n\n\n  // document.documentElement.offsetHeight is not reliable, so\n  // we have to jump through hoops to get a better value.\n  function getComputedStyle(prop,el) {\n    /* istanbul ignore next */  //Not testable in PhantomJS\n    function convertUnitsToPxForIE8(value) {\n      var PIXEL = /^\\d+(px)?$/i;\n\n      if (PIXEL.test(value)) {\n        return parseInt(value,base);\n      }\n\n      var\n        style = el.style.left,\n        runtimeStyle = el.runtimeStyle.left;\n\n      el.runtimeStyle.left = el.currentStyle.left;\n      el.style.left = value || 0;\n      value = el.style.pixelLeft;\n      el.style.left = style;\n      el.runtimeStyle.left = runtimeStyle;\n\n      return value;\n    }\n\n    var retVal = 0;\n    el =  el || document.body;\n\n    /* istanbul ignore else */ // Not testable in phantonJS\n    if (('defaultView' in document) && ('getComputedStyle' in document.defaultView)) {\n      retVal = document.defaultView.getComputedStyle(el, null);\n      retVal = (null !== retVal) ? retVal[prop] : 0;\n    } else {//IE8\n      retVal =  convertUnitsToPxForIE8(el.currentStyle[prop]);\n    }\n\n    return parseInt(retVal,base);\n  }\n\n  function chkEventThottle(timer) {\n    if(timer > throttledTimer/2) {\n      throttledTimer = 2*timer;\n      log('Event throttle increased to ' + throttledTimer + 'ms');\n    }\n  }\n\n  //Idea from https://github.com/guardian/iframe-messenger\n  function getMaxElement(side,elements) {\n    var\n      elementsLength = elements.length,\n      elVal          = 0,\n      maxVal         = 0,\n      Side           = capitalizeFirstLetter(side),\n      timer          = getNow();\n\n    for (var i = 0; i < elementsLength; i++) {\n      elVal = elements[i].getBoundingClientRect()[side] + getComputedStyle('margin'+Side,elements[i]);\n      if (elVal > maxVal) {\n        maxVal = elVal;\n      }\n    }\n\n    timer = getNow() - timer;\n\n    log('Parsed '+elementsLength+' HTML elements');\n    log('Element position calculated in ' + timer + 'ms');\n\n    chkEventThottle(timer);\n\n    return maxVal;\n  }\n\n  function getAllMeasurements(dimention) {\n    return [\n      dimention.bodyOffset(),\n      dimention.bodyScroll(),\n      dimention.documentElementOffset(),\n      dimention.documentElementScroll()\n    ];\n  }\n\n  function getTaggedElements(side,tag) {\n    function noTaggedElementsFound() {\n      warn('No tagged elements ('+tag+') found on page');\n      return document.querySelectorAll('body *');\n    }\n\n    var elements = document.querySelectorAll('['+tag+']');\n\n    if (0 === elements.length) noTaggedElementsFound();\n\n    return getMaxElement(side,elements);\n  }\n\n  function getAllElements() {\n    return document.querySelectorAll('body *');\n  }\n\n  var\n    getHeight = {\n      bodyOffset: function getBodyOffsetHeight() {\n        return  document.body.offsetHeight + getComputedStyle('marginTop') + getComputedStyle('marginBottom');\n      },\n\n      offset: function() {\n        return getHeight.bodyOffset(); //Backwards compatability\n      },\n\n      bodyScroll: function getBodyScrollHeight() {\n        return document.body.scrollHeight;\n      },\n\n      custom: function getCustomWidth() {\n        return customCalcMethods.height();\n      },\n\n      documentElementOffset: function getDEOffsetHeight() {\n        return document.documentElement.offsetHeight;\n      },\n\n      documentElementScroll: function getDEScrollHeight() {\n        return document.documentElement.scrollHeight;\n      },\n\n      max: function getMaxHeight() {\n        return Math.max.apply(null,getAllMeasurements(getHeight));\n      },\n\n      min: function getMinHeight() {\n        return Math.min.apply(null,getAllMeasurements(getHeight));\n      },\n\n      grow: function growHeight() {\n        return getHeight.max(); //Run max without the forced downsizing\n      },\n\n      lowestElement: function getBestHeight() {\n        return Math.max(getHeight.bodyOffset() || getHeight.documentElementOffset(), getMaxElement('bottom',getAllElements()));\n      },\n\n      taggedElement: function getTaggedElementsHeight() {\n        return getTaggedElements('bottom','data-iframe-height');\n      }\n    },\n\n    getWidth = {\n      bodyScroll: function getBodyScrollWidth() {\n        return document.body.scrollWidth;\n      },\n\n      bodyOffset: function getBodyOffsetWidth() {\n        return document.body.offsetWidth;\n      },\n\n      custom: function getCustomWidth() {\n        return customCalcMethods.width();\n      },\n\n      documentElementScroll: function getDEScrollWidth() {\n        return document.documentElement.scrollWidth;\n      },\n\n      documentElementOffset: function getDEOffsetWidth() {\n        return document.documentElement.offsetWidth;\n      },\n\n      scroll: function getMaxWidth() {\n        return Math.max(getWidth.bodyScroll(), getWidth.documentElementScroll());\n      },\n\n      max: function getMaxWidth() {\n        return Math.max.apply(null,getAllMeasurements(getWidth));\n      },\n\n      min: function getMinWidth() {\n        return Math.min.apply(null,getAllMeasurements(getWidth));\n      },\n\n      rightMostElement: function rightMostElement() {\n        return getMaxElement('right', getAllElements());\n      },\n\n      taggedElement: function getTaggedElementsWidth() {\n        return getTaggedElements('right', 'data-iframe-width');\n      }\n    };\n\n\n  function sizeIFrame(triggerEvent, triggerEventDesc, customHeight, customWidth) {\n\n    function resizeIFrame() {\n      height = currentHeight;\n      width  = currentWidth;\n\n      sendMsg(height,width,triggerEvent);\n    }\n\n    function isSizeChangeDetected() {\n      function checkTolarance(a,b) {\n        var retVal = Math.abs(a-b) <= tolerance;\n        return !retVal;\n      }\n\n      currentHeight = (undefined !== customHeight)  ? customHeight : getHeight[heightCalcMode]();\n      currentWidth  = (undefined !== customWidth )  ? customWidth  : getWidth[widthCalcMode]();\n\n      return\tcheckTolarance(height,currentHeight) || (calculateWidth && checkTolarance(width,currentWidth));\n    }\n\n    function isForceResizableEvent() {\n      return !(triggerEvent in {'init':1,'interval':1,'size':1});\n    }\n\n    function isForceResizableCalcMode() {\n      return (heightCalcMode in resetRequiredMethods) || (calculateWidth && widthCalcMode in resetRequiredMethods);\n    }\n\n    function logIgnored() {\n      log('No change in size detected');\n    }\n\n    function checkDownSizing() {\n      if (isForceResizableEvent() && isForceResizableCalcMode()) {\n        resetIFrame(triggerEventDesc);\n      } else if (!(triggerEvent in {'interval':1})) {\n        logIgnored();\n      }\n    }\n\n    var\tcurrentHeight,currentWidth;\n\n    if (isSizeChangeDetected() || 'init' === triggerEvent) {\n      lockTrigger();\n      resizeIFrame();\n    } else {\n      checkDownSizing();\n    }\n  }\n\n  var sizeIFrameThrottled = throttle(sizeIFrame);\n\n  function sendSize(triggerEvent, triggerEventDesc, customHeight, customWidth) {\n    function recordTrigger() {\n      if (!(triggerEvent in {'reset':1,'resetPage':1,'init':1})) {\n        log( 'Trigger event: ' + triggerEventDesc );\n      }\n    }\n\n    function isDoubleFiredEvent() {\n      return  triggerLocked && (triggerEvent in doubleEventList);\n    }\n\n    if (!isDoubleFiredEvent()) {\n      recordTrigger();\n      if (triggerEvent === 'init') {\n        sizeIFrame(triggerEvent, triggerEventDesc, customHeight, customWidth);\n      } else {\n        sizeIFrameThrottled(triggerEvent, triggerEventDesc, customHeight, customWidth);\n      }\n    } else {\n      log('Trigger event cancelled: '+triggerEvent);\n    }\n  }\n\n  function lockTrigger() {\n    if (!triggerLocked) {\n      triggerLocked = true;\n      log('Trigger event lock on');\n    }\n    clearTimeout(triggerLockedTimer);\n    triggerLockedTimer = setTimeout(function() {\n      triggerLocked = false;\n      log('Trigger event lock off');\n      log('--');\n    },eventCancelTimer);\n  }\n\n  function triggerReset(triggerEvent) {\n    height = getHeight[heightCalcMode]();\n    width  = getWidth[widthCalcMode]();\n\n    sendMsg(height,width,triggerEvent);\n  }\n\n  function resetIFrame(triggerEventDesc) {\n    var hcm = heightCalcMode;\n    heightCalcMode = heightCalcModeDefault;\n\n    log('Reset trigger event: ' + triggerEventDesc);\n    lockTrigger();\n    triggerReset('reset');\n\n    heightCalcMode = hcm;\n  }\n\n  function sendMsg(height,width,triggerEvent,msg,targetOrigin) {\n    function setTargetOrigin() {\n      if (undefined === targetOrigin) {\n        targetOrigin = targetOriginDefault;\n      } else {\n        log('Message targetOrigin: '+targetOrigin);\n      }\n    }\n\n    function sendToParent() {\n      var\n        size  = height + ':' + width,\n        message = myID + ':' +  size + ':' + triggerEvent + (undefined !== msg ? ':' + msg : '');\n\n      log('Sending message to host page (' + message + ')');\n      target.postMessage( msgID + message, targetOrigin);\n    }\n\n    if(true === sendPermit) {\n      setTargetOrigin();\n      sendToParent();\n    }\n  }\n\n  function receiver(event) {\n    var processRequestFromParent = {\n      init: function initFromParent() {\n        initMsg = event.data;\n        target  = event.source;\n\n        init();\n        firstRun = false;\n        setTimeout(function() { initLock = false;},eventCancelTimer);\n      },\n\n      reset: function resetFromParent() {\n        if (!initLock) {\n          log('Page size reset by host page');\n          triggerReset('resetPage');\n        } else {\n          log('Page reset ignored by init');\n        }\n      },\n\n      resize: function resizeFromParent() {\n        sendSize('resizeParent','Parent window requested size check');\n      },\n\n      moveToAnchor: function moveToAnchorF() {\n        inPageLinks.findTarget(getData());\n      },\n      inPageLink: function inPageLinkF() {this.moveToAnchor();}, //Backward compatability\n\n      pageInfo: function pageInfoFromParent() {\n        var msgBody = getData();\n        log('PageInfoFromParent called from parent: ' + msgBody );\n        pageInfoCallback(JSON.parse(msgBody));\n        log(' --');\n      },\n\n      message: function messageFromParent() {\n        var msgBody = getData();\n\n        log('MessageCallback called from parent: ' + msgBody );\n        messageCallback(JSON.parse(msgBody));\n        log(' --');\n      }\n    };\n\n    function isMessageForUs() {\n      return msgID === (''+event.data).substr(0,msgIdLen); //''+ Protects against non-string messages\n    }\n\n    function getMessageType() {\n      return event.data.split(']')[1].split(':')[0];\n    }\n\n    function getData() {\n      return event.data.substr(event.data.indexOf(':')+1);\n    }\n\n    function isMiddleTier() {\n      return !(typeof module !== 'undefined' && module.exports) && ('iFrameResize' in window) ||\n        ('jQuery' in window) && ('iFrameResize' in window.jQuery.prototype);\n    }\n\n    function isInitMsg() {\n      //Test if this message is from a child below us. This is an ugly test, however, updating\n      //the message format would break backwards compatibity.\n      return event.data.split(':')[2] in {'true':1,'false':1};\n    }\n\n    function callFromParent() {\n      var messageType = getMessageType();\n\n      if (messageType in processRequestFromParent) {\n        processRequestFromParent[messageType]();\n      } else if (!isMiddleTier() && !isInitMsg()) {\n        warn('Unexpected message ('+event.data+')');\n      }\n    }\n\n    function processMessage() {\n      if (false === firstRun) {\n        callFromParent();\n      } else if (isInitMsg()) {\n        processRequestFromParent.init();\n      } else {\n        log('Ignored message of type \"' + getMessageType() + '\". Received before initialization.');\n      }\n    }\n\n    if (isMessageForUs()) {\n      processMessage();\n    }\n  }\n\n  //Normally the parent kicks things off when it detects the iFrame has loaded.\n  //If this script is async-loaded, then tell parent page to retry init.\n  function chkLateLoaded() {\n    if('loading' !== document.readyState) {\n      window.parent.postMessage('[iFrameResizerChild]Ready','*');\n    }\n  }\n\n  addEventListener(window, 'message', receiver);\n  addEventListener(window, 'readystatechange', chkLateLoaded);\n  chkLateLoaded();\n\n  \n\n})();\n","import { IFrameComponent } from 'iframe-resizer';\n\nimport { EmbeddedCheckoutEventMap, EmbeddedCheckoutEventType } from './embedded-checkout-events';\nimport EmbeddedCheckoutOptions from './embedded-checkout-options';\nimport { EmbeddedContentEvent, EmbeddedContentEventType } from './iframe-content/embedded-content-events';\nimport IframeEventListener from './iframe-event-listener';\nimport IframeEventPoster from './iframe-event-poster';\nimport LoadingIndicator from './loading-indicator';\nimport ResizableIframeCreator from './resizable-iframe-creator';\n\nexport default class EmbeddedCheckout {\n    private _iframe?: IFrameComponent;\n    private _isAttached: boolean;\n\n    /**\n     * @internal\n     */\n    constructor(\n        private _iframeCreator: ResizableIframeCreator,\n        private _messageListener: IframeEventListener<EmbeddedCheckoutEventMap>,\n        private _messagePoster: IframeEventPoster<EmbeddedContentEvent>,\n        private _loadingIndicator: LoadingIndicator,\n        private _options: EmbeddedCheckoutOptions\n    ) {\n        this._isAttached = false;\n\n        if (this._options.onComplete) {\n            this._messageListener.addListener(EmbeddedCheckoutEventType.CheckoutComplete, this._options.onComplete);\n        }\n\n        if (this._options.onError) {\n            this._messageListener.addListener(EmbeddedCheckoutEventType.CheckoutError, this._options.onError);\n        }\n\n        if (this._options.onLoad) {\n            this._messageListener.addListener(EmbeddedCheckoutEventType.CheckoutLoaded, this._options.onLoad);\n        }\n\n        if (this._options.onFrameLoad) {\n            this._messageListener.addListener(EmbeddedCheckoutEventType.FrameLoaded, this._options.onFrameLoad);\n        }\n\n        if (this._options.onSignOut) {\n            this._messageListener.addListener(EmbeddedCheckoutEventType.SignedOut, this._options.onSignOut);\n        }\n\n        this._messageListener.addListener(EmbeddedCheckoutEventType.FrameLoaded, () => this._configureStyles());\n    }\n\n    attach(): Promise<this> {\n        if (this._isAttached) {\n            return Promise.resolve(this);\n        }\n\n        this._isAttached = true;\n        this._messageListener.listen();\n        this._loadingIndicator.show(this._options.containerId);\n\n        return this._iframeCreator.createFrame(this._options.url, this._options.containerId)\n            .then(iframe => {\n                this._iframe = iframe;\n\n                this._configureStyles();\n                this._loadingIndicator.hide();\n\n                return this;\n            })\n            .catch(error => {\n                this._isAttached = false;\n\n                this._messageListener.trigger({\n                    type: EmbeddedCheckoutEventType.FrameError,\n                    payload: error,\n                });\n\n                this._loadingIndicator.hide();\n\n                throw error;\n            });\n    }\n\n    detach(): void {\n        if (!this._isAttached) {\n            return;\n        }\n\n        this._isAttached = false;\n        this._messageListener.stopListen();\n\n        if (this._iframe && this._iframe.parentNode) {\n            this._iframe.parentNode.removeChild(this._iframe);\n            this._iframe.iFrameResizer.close();\n        }\n    }\n\n    private _configureStyles(): void {\n        if (!this._iframe || !this._iframe.contentWindow || !this._options.styles) {\n            return;\n        }\n\n        this._messagePoster.setTarget(this._iframe.contentWindow);\n\n        this._messagePoster.post({\n            type: EmbeddedContentEventType.StyleConfigured,\n            payload: this._options.styles,\n        });\n    }\n}\n","import { LoadingIndicatorStyles } from './embedded-checkout-styles';\n\nconst DEFAULT_STYLES: LoadingIndicatorStyles = {\n    size: 70,\n    color: '#d9d9d9',\n    backgroundColor: '#ffffff',\n};\n\nconst ROTATION_ANIMATION = 'embedded-checkout-loading-indicator-rotation';\n\nexport default class LoadingIndicator {\n    private _container: HTMLElement;\n    private _indicator: HTMLElement;\n    private _styles: LoadingIndicatorStyles;\n\n    constructor(\n        options?: { styles?: LoadingIndicatorStyles }\n    ) {\n        this._styles = { ...DEFAULT_STYLES, ...options && options.styles };\n\n        this._defineAnimation();\n\n        this._container = this._buildContainer();\n        this._indicator = this._buildIndicator();\n\n        this._container.appendChild(this._indicator);\n    }\n\n    show(parentId?: string): void {\n        if (parentId) {\n            const parent = document.getElementById(parentId);\n\n            if (!parent) {\n                throw new Error('Unable to attach the loading indicator because the parent ID is not valid.');\n            }\n\n            parent.appendChild(this._container);\n        }\n\n        this._container.style.visibility = 'visible';\n        this._container.style.opacity = '1';\n    }\n\n    hide(): void {\n        const handleTransitionEnd = () => {\n            this._container.style.visibility = 'hidden';\n\n            this._container.removeEventListener('transitionend', handleTransitionEnd);\n        };\n\n        this._container.addEventListener('transitionend', handleTransitionEnd);\n\n        this._container.style.opacity = '0';\n    }\n\n    private _buildContainer(): HTMLElement {\n        const container = document.createElement('div');\n\n        container.style.display = 'block';\n        container.style.bottom = '0';\n        container.style.left = '0';\n        container.style.height = '100%';\n        container.style.width = '100%';\n        container.style.position = 'absolute';\n        container.style.right = '0';\n        container.style.top = '0';\n        container.style.transition = 'all 250ms ease-out';\n        container.style.opacity = '0';\n\n        return container;\n    }\n\n    private _buildIndicator(): HTMLElement {\n        const indicator = document.createElement('div');\n\n        indicator.style.display = 'block';\n        indicator.style.width = `${this._styles.size}px`;\n        indicator.style.height = `${this._styles.size}px`;\n        indicator.style.borderRadius = `${this._styles.size}px`;\n        indicator.style.border = 'solid 1px';\n        indicator.style.borderColor = `${this._styles.backgroundColor} ${this._styles.backgroundColor} ${this._styles.color} ${this._styles.color}`;\n        indicator.style.margin = '0 auto';\n        indicator.style.position = 'absolute';\n        indicator.style.left = '0';\n        indicator.style.right = '0';\n        indicator.style.top = '50%';\n        indicator.style.transform = 'translateY(-50%) rotate(0deg)';\n        indicator.style.transformStyle = 'preserve-3d';\n        indicator.style.animation = `${ROTATION_ANIMATION} 500ms infinite cubic-bezier(0.69, 0.31, 0.56, 0.83)`;\n\n        return indicator;\n    }\n\n    private _defineAnimation(): void {\n        // In order to define CSS animation, we need to insert a stylesheet into the host frame.\n        // We only have to do it once.\n        if (document.getElementById(ROTATION_ANIMATION)) {\n            return;\n        }\n\n        const style = document.createElement('style');\n\n        style.id = ROTATION_ANIMATION;\n\n        document.head.appendChild(style);\n\n        if (style.sheet instanceof CSSStyleSheet) {\n            style.sheet.insertRule(`\n                @keyframes ${ROTATION_ANIMATION} {\n                    0% { transform: translateY(-50%) rotate(0deg); }\n                    100% { transform: translateY(-50%) rotate(360deg); }\n                }\n            `);\n        }\n    }\n}\n","import { StandardError } from '../../common/error/errors';\n\nexport default class NotEmbeddableError extends StandardError {\n    constructor(message?: string) {\n        super(message || 'Unable to embed the checkout form.');\n\n        this.type = 'not_embeddable';\n    }\n}\n","import { iframeResizer, IFrameComponent } from 'iframe-resizer';\n\nimport { EmbeddedCheckoutEventType } from './embedded-checkout-events';\nimport { NotEmbeddableError } from './errors';\nimport isIframeEvent from './is-iframe-event';\nimport parseOrigin from './parse-origin';\n\nexport default class ResizableIframeCreator {\n    constructor(\n        private _options?: { timeout: number }\n    ) {}\n\n    createFrame(src: string, containerId: string): Promise<IFrameComponent> {\n        const container = document.getElementById(containerId);\n        const { timeout = 60000 } = this._options || {};\n\n        if (!container) {\n            throw new NotEmbeddableError('Unable to embed the iframe because the container element could not be found.');\n        }\n\n        const iframe = document.createElement('iframe');\n\n        iframe.src = src;\n        iframe.style.border = 'none';\n        iframe.style.display = 'none';\n        iframe.style.width = '100%';\n        iframe.allowPaymentRequest = true;\n\n        container.appendChild(iframe);\n\n        return this._toResizableFrame(iframe, timeout)\n            .catch(error => {\n                container.removeChild(iframe);\n\n                throw error;\n            });\n    }\n\n    private _toResizableFrame(iframe: HTMLIFrameElement, timeoutInterval: number): Promise<IFrameComponent> {\n        // Can't simply listen to `load` event because it always gets triggered even if there's an error.\n        // Instead, listen to the `load` inside the iframe and let the parent frame know when it happens.\n        return new Promise((resolve, reject) => {\n            const timeout = window.setTimeout(() => {\n                reject(new NotEmbeddableError('Unable to embed the iframe because the content could not be loaded.'));\n            }, timeoutInterval);\n\n            const handleMessage = (event: MessageEvent) => {\n                if (event.origin !== parseOrigin(iframe.src)) {\n                    return;\n                }\n\n                if (isIframeEvent(event.data, EmbeddedCheckoutEventType.FrameError)) {\n                    teardown();\n                    reject(new NotEmbeddableError(event.data.payload.message));\n                }\n\n                if (isIframeEvent(event.data, EmbeddedCheckoutEventType.FrameLoaded)) {\n                    iframe.style.display = '';\n\n                    const iframes = iframeResizer({\n                        scrolling: false,\n                        sizeWidth: false,\n                        heightCalculationMethod: 'lowestElement',\n                    }, iframe);\n\n                    teardown();\n                    resolve(iframes[iframes.length - 1]);\n                }\n            };\n\n            const teardown = () => {\n                window.removeEventListener('message', handleMessage);\n                window.clearTimeout(timeout);\n            };\n\n            window.addEventListener('message', handleMessage);\n        });\n    }\n}\n","import EmbeddedCheckout from './embedded-checkout';\nimport { EmbeddedCheckoutEventMap } from './embedded-checkout-events';\nimport EmbeddedCheckoutOptions from './embedded-checkout-options';\nimport { EmbeddedContentEvent } from './iframe-content/embedded-content-events';\nimport IframeEventListener from './iframe-event-listener';\nimport IframeEventPoster from './iframe-event-poster';\nimport LoadingIndicator from './loading-indicator';\nimport parseOrigin from './parse-origin';\nimport ResizableIframeCreator from './resizable-iframe-creator';\n\n/**\n * Embed the checkout form in an iframe.\n *\n * Once the iframe is embedded, it will automatically resize according to the\n * size of the checkout form. It will also notify the parent window when certain\n * events have occurred. i.e.: when the form is loaded and ready to be used.\n *\n * ```js\n * embedCheckout({\n *     url: 'https://checkout/url',\n *     containerId: 'container-id',\n * });\n * ```\n *\n * Please note that this feature is currently in an early stage of development.\n * Therefore the API is unstable and not ready for public consumption.\n *\n * @alpha\n * @param options - Options for embedding the checkout form.\n * @returns A promise that resolves to an instance of `EmbeddedCheckout`.\n */\nexport default function embedCheckout(options: EmbeddedCheckoutOptions): Promise<EmbeddedCheckout> {\n    const origin = parseOrigin(options.url);\n    const embeddedCheckout = new EmbeddedCheckout(\n        new ResizableIframeCreator(),\n        new IframeEventListener<EmbeddedCheckoutEventMap>(origin),\n        new IframeEventPoster<EmbeddedContentEvent>(origin),\n        new LoadingIndicator({ styles: options.styles && options.styles.loadingIndicator }),\n        options\n    );\n\n    return embeddedCheckout.attach();\n}\n","export { default as embedCheckout } from './embed-checkout';\n","export enum EmbeddedCheckoutEventType {\n    CheckoutComplete = 'CHECKOUT_COMPLETE',\n    CheckoutError = 'CHECKOUT_ERROR',\n    CheckoutLoaded = 'CHECKOUT_LOADED',\n    FrameError = 'FRAME_ERROR',\n    FrameLoaded = 'FRAME_LOADED',\n    SignedOut = 'SIGNED_OUT',\n}\n\nexport interface EmbeddedCheckoutEventMap {\n    [EmbeddedCheckoutEventType.CheckoutComplete]: EmbeddedCheckoutCompleteEvent;\n    [EmbeddedCheckoutEventType.CheckoutError]: EmbeddedCheckoutErrorEvent;\n    [EmbeddedCheckoutEventType.CheckoutLoaded]: EmbeddedCheckoutLoadedEvent;\n    [EmbeddedCheckoutEventType.FrameError]: EmbeddedCheckoutFrameErrorEvent;\n    [EmbeddedCheckoutEventType.FrameLoaded]: EmbeddedCheckoutFrameLoadedEvent;\n    [EmbeddedCheckoutEventType.SignedOut]: EmbeddedCheckoutSignedOutEvent;\n}\n\nexport type EmbeddedCheckoutEvent = (\n    EmbeddedCheckoutCompleteEvent |\n    EmbeddedCheckoutErrorEvent |\n    EmbeddedCheckoutFrameErrorEvent |\n    EmbeddedCheckoutFrameLoadedEvent |\n    EmbeddedCheckoutLoadedEvent |\n    EmbeddedCheckoutSignedOutEvent\n);\n\nexport interface EmbeddedCheckoutCompleteEvent {\n    type: EmbeddedCheckoutEventType.CheckoutComplete;\n}\n\nexport interface EmbeddedCheckoutErrorEvent {\n    type: EmbeddedCheckoutEventType.CheckoutError;\n    payload: EmbeddedCheckoutError;\n}\n\nexport interface EmbeddedCheckoutLoadedEvent {\n    type: EmbeddedCheckoutEventType.CheckoutLoaded;\n}\n\nexport interface EmbeddedCheckoutFrameErrorEvent {\n    type: EmbeddedCheckoutEventType.FrameError;\n    payload: EmbeddedCheckoutError;\n}\n\nexport interface EmbeddedCheckoutFrameLoadedEvent {\n    type: EmbeddedCheckoutEventType.FrameLoaded;\n}\n\nexport interface EmbeddedCheckoutSignedOutEvent {\n    type: EmbeddedCheckoutEventType.SignedOut;\n}\n\nexport interface EmbeddedCheckoutError {\n    message: string;\n    type?: string;\n    subtype?: string;\n}\n","\n'use strict';\n\nmodule.exports = require('./js');\n","exports.iframeResizer = require('./iframeResizer');\nexports.iframeResizerContentWindow = require('./iframeResizer.contentWindow');\n","/*\n * File: iframeResizer.js\n * Desc: Force iframes to size to content.\n * Requires: iframeResizer.contentWindow.js to be loaded into the target frame.\n * Doc: https://github.com/davidjbradshaw/iframe-resizer\n * Author: David J. Bradshaw - dave@bradshaw.net\n * Contributor: Jure Mav - jure.mav@gmail.com\n * Contributor: Reed Dadoune - reed@dadoune.com\n */\n\n\n;(function(undefined) {\n  'use strict';\n\n  if(typeof window === 'undefined') return; // don't run for server side render\n\n  var\n    count                 = 0,\n    logEnabled            = false,\n    hiddenCheckEnabled    = false,\n    msgHeader             = 'message',\n    msgHeaderLen          = msgHeader.length,\n    msgId                 = '[iFrameSizer]', //Must match iframe msg ID\n    msgIdLen              = msgId.length,\n    pagePosition          = null,\n    requestAnimationFrame = window.requestAnimationFrame,\n    resetRequiredMethods  = {max:1,scroll:1,bodyScroll:1,documentElementScroll:1},\n    settings              = {},\n    timer                 = null,\n    logId                 = 'Host Page',\n\n    defaults              = {\n      autoResize                : true,\n      bodyBackground            : null,\n      bodyMargin                : null,\n      bodyMarginV1              : 8,\n      bodyPadding               : null,\n      checkOrigin               : true,\n      inPageLinks               : false,\n      enablePublicMethods       : true,\n      heightCalculationMethod   : 'bodyOffset',\n      id                        : 'iFrameResizer',\n      interval                  : 32,\n      log                       : false,\n      maxHeight                 : Infinity,\n      maxWidth                  : Infinity,\n      minHeight                 : 0,\n      minWidth                  : 0,\n      resizeFrom                : 'parent',\n      scrolling                 : false,\n      sizeHeight                : true,\n      sizeWidth                 : false,\n      warningTimeout            : 5000,\n      tolerance                 : 0,\n      widthCalculationMethod    : 'scroll',\n      closedCallback            : function() {},\n      initCallback              : function() {},\n      messageCallback           : function() {warn('MessageCallback function not defined');},\n      resizedCallback           : function() {},\n      scrollCallback            : function() {return true;}\n    };\n\n  function addEventListener(obj,evt,func) {\n    /* istanbul ignore else */ // Not testable in PhantonJS\n    if ('addEventListener' in window) {\n      obj.addEventListener(evt,func, false);\n    } else if ('attachEvent' in window) {//IE\n      obj.attachEvent('on'+evt,func);\n    }\n  }\n\n  function removeEventListener(el,evt,func) {\n    /* istanbul ignore else */ // Not testable in phantonJS\n    if ('removeEventListener' in window) {\n      el.removeEventListener(evt,func, false);\n    } else if ('detachEvent' in window) { //IE\n      el.detachEvent('on'+evt,func);\n    }\n  }\n\n  function setupRequestAnimationFrame() {\n    var\n      vendors = ['moz', 'webkit', 'o', 'ms'],\n      x;\n\n    // Remove vendor prefixing if prefixed and break early if not\n    for (x = 0; x < vendors.length && !requestAnimationFrame; x += 1) {\n      requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\n    }\n\n    if (!(requestAnimationFrame)) {\n      log('setup','RequestAnimationFrame not supported');\n    }\n  }\n\n  function getMyID(iframeId) {\n    var retStr = 'Host page: '+iframeId;\n\n    if (window.top !== window.self) {\n      if (window.parentIFrame && window.parentIFrame.getId) {\n        retStr = window.parentIFrame.getId()+': '+iframeId;\n      } else {\n        retStr = 'Nested host page: '+iframeId;\n      }\n    }\n\n    return retStr;\n  }\n\n  function formatLogHeader(iframeId) {\n    return msgId + '[' + getMyID(iframeId) + ']';\n  }\n\n  function isLogEnabled(iframeId) {\n    return settings[iframeId] ? settings[iframeId].log : logEnabled;\n  }\n\n  function log(iframeId,msg) {\n    output('log',iframeId,msg,isLogEnabled(iframeId));\n  }\n\n  function info(iframeId,msg) {\n    output('info',iframeId,msg,isLogEnabled(iframeId));\n  }\n\n  function warn(iframeId,msg) {\n    output('warn',iframeId,msg,true);\n  }\n\n  function output(type,iframeId,msg,enabled) {\n    if (true === enabled && 'object' === typeof window.console) {\n      console[type](formatLogHeader(iframeId),msg);\n    }\n  }\n\n  function iFrameListener(event) {\n    function resizeIFrame() {\n      function resize() {\n        setSize(messageData);\n        setPagePosition(iframeId);\n        callback('resizedCallback',messageData);\n      }\n\n      ensureInRange('Height');\n      ensureInRange('Width');\n\n      syncResize(resize,messageData,'init');\n    }\n\n    function processMsg() {\n      var data = msg.substr(msgIdLen).split(':');\n\n      return {\n        iframe: settings[data[0]] && settings[data[0]].iframe,\n        id:     data[0],\n        height: data[1],\n        width:  data[2],\n        type:   data[3]\n      };\n    }\n\n    function ensureInRange(Dimension) {\n      var\n        max  = Number(settings[iframeId]['max' + Dimension]),\n        min  = Number(settings[iframeId]['min' + Dimension]),\n        dimension = Dimension.toLowerCase(),\n        size = Number(messageData[dimension]);\n\n      log(iframeId,'Checking ' + dimension + ' is in range ' + min + '-' + max);\n\n      if (size<min) {\n        size=min;\n        log(iframeId,'Set ' + dimension + ' to min value');\n      }\n\n      if (size>max) {\n        size=max;\n        log(iframeId,'Set ' + dimension + ' to max value');\n      }\n\n      messageData[dimension] = '' + size;\n    }\n\n\n    function isMessageFromIFrame() {\n      function checkAllowedOrigin() {\n        function checkList() {\n          var\n            i = 0,\n            retCode = false;\n\n          log(iframeId,'Checking connection is from allowed list of origins: ' + checkOrigin);\n\n          for (; i < checkOrigin.length; i++) {\n            if (checkOrigin[i] === origin) {\n              retCode = true;\n              break;\n            }\n          }\n          return retCode;\n        }\n\n        function checkSingle() {\n          var remoteHost  = settings[iframeId] && settings[iframeId].remoteHost;\n          log(iframeId,'Checking connection is from: '+remoteHost);\n          return origin === remoteHost;\n        }\n\n        return checkOrigin.constructor === Array ? checkList() : checkSingle();\n      }\n\n      var\n        origin      = event.origin,\n        checkOrigin = settings[iframeId] && settings[iframeId].checkOrigin;\n\n      if (checkOrigin && (''+origin !== 'null') && !checkAllowedOrigin()) {\n        throw new Error(\n          'Unexpected message received from: ' + origin +\n          ' for ' + messageData.iframe.id +\n          '. Message was: ' + event.data +\n          '. This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.'\n        );\n      }\n\n      return true;\n    }\n\n    function isMessageForUs() {\n      return msgId === (('' + msg).substr(0,msgIdLen)) && (msg.substr(msgIdLen).split(':')[0] in settings); //''+Protects against non-string msg\n    }\n\n    function isMessageFromMetaParent() {\n      //Test if this message is from a parent above us. This is an ugly test, however, updating\n      //the message format would break backwards compatibity.\n      var retCode = messageData.type in {'true':1,'false':1,'undefined':1};\n\n      if (retCode) {\n        log(iframeId,'Ignoring init message from meta parent page');\n      }\n\n      return retCode;\n    }\n\n    function getMsgBody(offset) {\n      return msg.substr(msg.indexOf(':')+msgHeaderLen+offset);\n    }\n\n    function forwardMsgFromIFrame(msgBody) {\n      log(iframeId,'MessageCallback passed: {iframe: '+ messageData.iframe.id + ', message: ' + msgBody + '}');\n      callback('messageCallback',{\n        iframe: messageData.iframe,\n        message: JSON.parse(msgBody)\n      });\n      log(iframeId,'--');\n    }\n\n    function getPageInfo() {\n      var\n        bodyPosition   = document.body.getBoundingClientRect(),\n        iFramePosition = messageData.iframe.getBoundingClientRect();\n\n      return JSON.stringify({\n        iframeHeight: iFramePosition.height,\n        iframeWidth:  iFramePosition.width,\n        clientHeight: Math.max(document.documentElement.clientHeight, window.innerHeight || 0),\n        clientWidth:  Math.max(document.documentElement.clientWidth,  window.innerWidth  || 0),\n        offsetTop:    parseInt(iFramePosition.top  - bodyPosition.top,  10),\n        offsetLeft:   parseInt(iFramePosition.left - bodyPosition.left, 10),\n        scrollTop:    window.pageYOffset,\n        scrollLeft:   window.pageXOffset\n      });\n    }\n\n    function sendPageInfoToIframe(iframe,iframeId) {\n      function debouncedTrigger() {\n        trigger(\n          'Send Page Info',\n          'pageInfo:' + getPageInfo(),\n          iframe,\n          iframeId\n        );\n      }\n      debounceFrameEvents(debouncedTrigger,32,iframeId);\n    }\n\n\n    function startPageInfoMonitor() {\n      function setListener(type,func) {\n        function sendPageInfo() {\n          if (settings[id]) {\n            sendPageInfoToIframe(settings[id].iframe,id);\n          } else {\n            stop();\n          }\n        }\n\n        ['scroll','resize'].forEach(function(evt) {\n          log(id, type +  evt + ' listener for sendPageInfo');\n          func(window,evt,sendPageInfo);\n        });\n      }\n\n      function stop() {\n        setListener('Remove ', removeEventListener);\n      }\n\n      function start() {\n        setListener('Add ', addEventListener);\n      }\n\n      var id = iframeId; //Create locally scoped copy of iFrame ID\n\n      start();\n\n      if (settings[id]) {\n        settings[id].stopPageInfo = stop;\n      }\n    }\n\n    function stopPageInfoMonitor() {\n      if (settings[iframeId] && settings[iframeId].stopPageInfo) {\n        settings[iframeId].stopPageInfo();\n        delete settings[iframeId].stopPageInfo;\n      }\n    }\n\n    function checkIFrameExists() {\n      var retBool = true;\n\n      if (null === messageData.iframe) {\n        warn(iframeId,'IFrame ('+messageData.id+') not found');\n        retBool = false;\n      }\n      return retBool;\n    }\n\n    function getElementPosition(target) {\n      var iFramePosition = target.getBoundingClientRect();\n\n      getPagePosition(iframeId);\n\n      return {\n        x: Math.floor( Number(iFramePosition.left) + Number(pagePosition.x) ),\n        y: Math.floor( Number(iFramePosition.top)  + Number(pagePosition.y) )\n      };\n    }\n\n    function scrollRequestFromChild(addOffset) {\n      /* istanbul ignore next */  //Not testable in Karma\n      function reposition() {\n        pagePosition = newPosition;\n        scrollTo();\n        log(iframeId,'--');\n      }\n\n      function calcOffset() {\n        return {\n          x: Number(messageData.width) + offset.x,\n          y: Number(messageData.height) + offset.y\n        };\n      }\n\n      function scrollParent() {\n        if (window.parentIFrame) {\n          window.parentIFrame['scrollTo'+(addOffset?'Offset':'')](newPosition.x,newPosition.y);\n        } else {\n          warn(iframeId,'Unable to scroll to requested position, window.parentIFrame not found');\n        }\n      }\n\n      var\n        offset = addOffset ? getElementPosition(messageData.iframe) : {x:0,y:0},\n        newPosition = calcOffset();\n\n      log(iframeId,'Reposition requested from iFrame (offset x:'+offset.x+' y:'+offset.y+')');\n\n      if(window.top !== window.self) {\n        scrollParent();\n      } else {\n        reposition();\n      }\n    }\n\n    function scrollTo() {\n      if (false !== callback('scrollCallback',pagePosition)) {\n        setPagePosition(iframeId);\n      } else {\n        unsetPagePosition();\n      }\n    }\n\n    function findTarget(location) {\n      function jumpToTarget() {\n        var jumpPosition = getElementPosition(target);\n\n        log(iframeId,'Moving to in page link (#'+hash+') at x: '+jumpPosition.x+' y: '+jumpPosition.y);\n        pagePosition = {\n          x: jumpPosition.x,\n          y: jumpPosition.y\n        };\n\n        scrollTo();\n        log(iframeId,'--');\n      }\n\n      function jumpToParent() {\n        if (window.parentIFrame) {\n          window.parentIFrame.moveToAnchor(hash);\n        } else {\n          log(iframeId,'In page link #'+hash+' not found and window.parentIFrame not found');\n        }\n      }\n\n      var\n        hash     = location.split('#')[1] || '',\n        hashData = decodeURIComponent(hash),\n        target   = document.getElementById(hashData) || document.getElementsByName(hashData)[0];\n\n      if (target) {\n        jumpToTarget();\n      } else if(window.top!==window.self) {\n        jumpToParent();\n      } else {\n        log(iframeId,'In page link #'+hash+' not found');\n      }\n    }\n\n    function callback(funcName,val) {\n      return chkCallback(iframeId,funcName,val);\n    }\n\n    function actionMsg() {\n\n      if(settings[iframeId] && settings[iframeId].firstRun) firstRun();\n\n      switch(messageData.type) {\n      case 'close':\n        if(settings[iframeId].closeRequestCallback) chkCallback(iframeId, 'closeRequestCallback', settings[iframeId].iframe);\n        else closeIFrame(messageData.iframe);\n        break;\n      case 'message':\n        forwardMsgFromIFrame(getMsgBody(6));\n        break;\n      case 'scrollTo':\n        scrollRequestFromChild(false);\n        break;\n      case 'scrollToOffset':\n        scrollRequestFromChild(true);\n        break;\n      case 'pageInfo':\n        sendPageInfoToIframe(settings[iframeId] && settings[iframeId].iframe,iframeId);\n        startPageInfoMonitor();\n        break;\n      case 'pageInfoStop':\n        stopPageInfoMonitor();\n        break;\n      case 'inPageLink':\n        findTarget(getMsgBody(9));\n        break;\n      case 'reset':\n        resetIFrame(messageData);\n        break;\n      case 'init':\n        resizeIFrame();\n        callback('initCallback',messageData.iframe);\n        break;\n      default:\n        resizeIFrame();\n      }\n    }\n\n    function hasSettings(iframeId) {\n      var retBool = true;\n\n      if (!settings[iframeId]) {\n        retBool = false;\n        warn(messageData.type + ' No settings for ' + iframeId + '. Message was: ' + msg);\n      }\n\n      return retBool;\n    }\n\n    function iFrameReadyMsgReceived() {\n      for (var iframeId in settings) {\n        trigger('iFrame requested init',createOutgoingMsg(iframeId),document.getElementById(iframeId),iframeId);\n      }\n    }\n\n    function firstRun() {\n      if (settings[iframeId]) {\n        settings[iframeId].firstRun = false;\n      }\n    }\n\n    function clearWarningTimeout() {\n      if (settings[iframeId]) {\n        clearTimeout(settings[iframeId].msgTimeout);\n        settings[iframeId].warningTimeout = 0;\n      }\n    }\n\n    var\n      msg = event.data,\n      messageData = {},\n      iframeId = null;\n\n    if('[iFrameResizerChild]Ready' === msg) {\n      iFrameReadyMsgReceived();\n    } else if (isMessageForUs()) {\n      messageData = processMsg();\n      iframeId    = logId = messageData.id;\n      if (settings[iframeId]) {\n        settings[iframeId].loaded = true;\n      }\n\n      if (!isMessageFromMetaParent() && hasSettings(iframeId)) {\n        log(iframeId,'Received: '+msg);\n\n        if ( checkIFrameExists() && isMessageFromIFrame() ) {\n          actionMsg();\n        }\n      }\n    } else {\n      info(iframeId,'Ignored: '+msg);\n    }\n\n  }\n\n\n  function chkCallback(iframeId,funcName,val) {\n    var\n      func = null,\n      retVal = null;\n\n    if(settings[iframeId]) {\n      func = settings[iframeId][funcName];\n\n      if( 'function' === typeof func) {\n        retVal = func(val);\n      } else {\n        throw new TypeError(funcName+' on iFrame['+iframeId+'] is not a function');\n      }\n    }\n\n    return retVal;\n  }\n\n  function removeIframeListeners(iframe) {\n    var iframeId = iframe.id;\n    delete settings[iframeId];\n  }\n\n  function closeIFrame(iframe) {\n    var iframeId = iframe.id;\n    log(iframeId,'Removing iFrame: '+iframeId);\n\n    try {\n      // Catch race condition error with React\n      if (iframe.parentNode) { iframe.parentNode.removeChild(iframe); }\n    } catch (e) {}\n    \n    chkCallback(iframeId,'closedCallback',iframeId);\n    log(iframeId,'--');\n    removeIframeListeners(iframe);\n  }\n\n  function getPagePosition(iframeId) {\n    if(null === pagePosition) {\n      pagePosition = {\n        x: (window.pageXOffset !== undefined) ? window.pageXOffset : document.documentElement.scrollLeft,\n        y: (window.pageYOffset !== undefined) ? window.pageYOffset : document.documentElement.scrollTop\n      };\n      log(iframeId,'Get page position: '+pagePosition.x+','+pagePosition.y);\n    }\n  }\n\n  function setPagePosition(iframeId) {\n    if(null !== pagePosition) {\n      window.scrollTo(pagePosition.x,pagePosition.y);\n      log(iframeId,'Set page position: '+pagePosition.x+','+pagePosition.y);\n      unsetPagePosition();\n    }\n  }\n\n  function unsetPagePosition() {\n    pagePosition = null;\n  }\n\n  function resetIFrame(messageData) {\n    function reset() {\n      setSize(messageData);\n      trigger('reset','reset',messageData.iframe,messageData.id);\n    }\n\n    log(messageData.id,'Size reset requested by '+('init'===messageData.type?'host page':'iFrame'));\n    getPagePosition(messageData.id);\n    syncResize(reset,messageData,'reset');\n  }\n\n  function setSize(messageData) {\n    function setDimension(dimension) {\n      messageData.iframe.style[dimension] = messageData[dimension] + 'px';\n      log(\n        messageData.id,\n        'IFrame (' + iframeId +\n        ') ' + dimension +\n        ' set to ' + messageData[dimension] + 'px'\n      );\n    }\n\n    function chkZero(dimension) {\n      //FireFox sets dimension of hidden iFrames to zero.\n      //So if we detect that set up an event to check for\n      //when iFrame becomes visible.\n\n      /* istanbul ignore next */  //Not testable in PhantomJS\n      if (!hiddenCheckEnabled && '0' === messageData[dimension]) {\n        hiddenCheckEnabled = true;\n        log(iframeId,'Hidden iFrame detected, creating visibility listener');\n        fixHiddenIFrames();\n      }\n    }\n\n    function processDimension(dimension) {\n      setDimension(dimension);\n      chkZero(dimension);\n    }\n\n    var iframeId = messageData.iframe.id;\n\n    if(settings[iframeId]) {\n      if( settings[iframeId].sizeHeight) { processDimension('height'); }\n      if( settings[iframeId].sizeWidth ) { processDimension('width'); }\n    }\n  }\n\n  function syncResize(func,messageData,doNotSync) {\n    /* istanbul ignore if */  //Not testable in PhantomJS\n    if(doNotSync!==messageData.type && requestAnimationFrame) {\n      log(messageData.id,'Requesting animation frame');\n      requestAnimationFrame(func);\n    } else {\n      func();\n    }\n  }\n\n  function trigger(calleeMsg, msg, iframe, id, noResponseWarning) {\n    function postMessageToIFrame() {\n      var target = settings[id] && settings[id].targetOrigin;\n      log(id,'[' + calleeMsg + '] Sending msg to iframe['+id+'] ('+msg+') targetOrigin: '+target);\n      iframe.contentWindow.postMessage( msgId + msg, target );\n    }\n\n    function iFrameNotFound() {\n      warn(id,'[' + calleeMsg + '] IFrame('+id+') not found');\n    }\n\n    function chkAndSend() {\n      if(iframe && 'contentWindow' in iframe && (null !== iframe.contentWindow)) { //Null test for PhantomJS\n        postMessageToIFrame();\n      } else {\n        iFrameNotFound();\n      }\n    }\n\n    function warnOnNoResponse() {\n      function warning() {\n        if (settings[id] && !settings[id].loaded && !errorShown) {\n          errorShown = true;\n          warn(id, 'IFrame has not responded within '+ settings[id].warningTimeout/1000 +' seconds. Check iFrameResizer.contentWindow.js has been loaded in iFrame. This message can be ignored if everything is working, or you can set the warningTimeout option to a higher value or zero to suppress this warning.');\n        }\n      }\n\n      if (!!noResponseWarning && settings[id] && !!settings[id].warningTimeout) {\n        settings[id].msgTimeout = setTimeout(warning, settings[id].warningTimeout);\n      }\n    }\n\n    var errorShown = false;\n\n    id = id || iframe.id;\n\n    if(settings[id]) {\n      chkAndSend();\n      warnOnNoResponse();\n    }\n\n  }\n\n  function createOutgoingMsg(iframeId) {\n    return iframeId +\n      ':' + settings[iframeId].bodyMarginV1 +\n      ':' + settings[iframeId].sizeWidth +\n      ':' + settings[iframeId].log +\n      ':' + settings[iframeId].interval +\n      ':' + settings[iframeId].enablePublicMethods +\n      ':' + settings[iframeId].autoResize +\n      ':' + settings[iframeId].bodyMargin +\n      ':' + settings[iframeId].heightCalculationMethod +\n      ':' + settings[iframeId].bodyBackground +\n      ':' + settings[iframeId].bodyPadding +\n      ':' + settings[iframeId].tolerance +\n      ':' + settings[iframeId].inPageLinks +\n      ':' + settings[iframeId].resizeFrom +\n      ':' + settings[iframeId].widthCalculationMethod;\n  }\n\n  function setupIFrame(iframe,options) {\n    function setLimits() {\n      function addStyle(style) {\n        if ((Infinity !== settings[iframeId][style]) && (0 !== settings[iframeId][style])) {\n          iframe.style[style] = settings[iframeId][style] + 'px';\n          log(iframeId,'Set '+style+' = '+settings[iframeId][style]+'px');\n        }\n      }\n\n      function chkMinMax(dimension) {\n        if (settings[iframeId]['min'+dimension]>settings[iframeId]['max'+dimension]) {\n          throw new Error('Value for min'+dimension+' can not be greater than max'+dimension);\n        }\n      }\n\n      chkMinMax('Height');\n      chkMinMax('Width');\n\n      addStyle('maxHeight');\n      addStyle('minHeight');\n      addStyle('maxWidth');\n      addStyle('minWidth');\n    }\n\n    function newId() {\n      var id = ((options && options.id) || defaults.id + count++);\n      if  (null !== document.getElementById(id)) {\n        id = id + count++;\n      }\n      return id;\n    }\n\n    function ensureHasId(iframeId) {\n      logId=iframeId;\n      if (''===iframeId) {\n        iframe.id = iframeId =  newId();\n        logEnabled = (options || {}).log;\n        logId=iframeId;\n        log(iframeId,'Added missing iframe ID: '+ iframeId +' (' + iframe.src + ')');\n      }\n\n\n      return iframeId;\n    }\n\n    function setScrolling() {\n      log(iframeId,'IFrame scrolling ' + (settings[iframeId] && settings[iframeId].scrolling ? 'enabled' : 'disabled') + ' for ' + iframeId);\n      iframe.style.overflow = false === (settings[iframeId] && settings[iframeId].scrolling) ? 'hidden' : 'auto';\n      switch(settings[iframeId] && settings[iframeId].scrolling) {\n        case true:\n          iframe.scrolling = 'yes';\n          break;\n        case false:\n          iframe.scrolling = 'no';\n          break;\n        default:\n          iframe.scrolling = settings[iframeId] ? settings[iframeId].scrolling : 'no';\n      }\n    }\n\n    //The V1 iFrame script expects an int, where as in V2 expects a CSS\n    //string value such as '1px 3em', so if we have an int for V2, set V1=V2\n    //and then convert V2 to a string PX value.\n    function setupBodyMarginValues() {\n      if (('number'===typeof(settings[iframeId] && settings[iframeId].bodyMargin)) || ('0'===(settings[iframeId] && settings[iframeId].bodyMargin))) {\n        settings[iframeId].bodyMarginV1 = settings[iframeId].bodyMargin;\n        settings[iframeId].bodyMargin   = '' + settings[iframeId].bodyMargin + 'px';\n      }\n    }\n\n    function checkReset() {\n      // Reduce scope of firstRun to function, because IE8's JS execution\n      // context stack is borked and this value gets externally\n      // changed midway through running this function!!!\n      var\n        firstRun           = settings[iframeId] && settings[iframeId].firstRun,\n        resetRequertMethod = settings[iframeId] && settings[iframeId].heightCalculationMethod in resetRequiredMethods;\n\n      if (!firstRun && resetRequertMethod) {\n        resetIFrame({iframe:iframe, height:0, width:0, type:'init'});\n      }\n    }\n\n    function setupIFrameObject() {\n      if(Function.prototype.bind && settings[iframeId]) { //Ignore unpolyfilled IE8.\n        settings[iframeId].iframe.iFrameResizer = {\n\n          close        : closeIFrame.bind(null,settings[iframeId].iframe),\n\n          removeListeners: removeIframeListeners.bind(null,settings[iframeId].iframe),\n\n          resize       : trigger.bind(null,'Window resize', 'resize', settings[iframeId].iframe),\n\n          moveToAnchor : function(anchor) {\n            trigger('Move to anchor','moveToAnchor:'+anchor, settings[iframeId].iframe,iframeId);\n          },\n\n          sendMessage  : function(message) {\n            message = JSON.stringify(message);\n            trigger('Send Message','message:'+message, settings[iframeId].iframe, iframeId);\n          }\n        };\n      }\n    }\n\n    //We have to call trigger twice, as we can not be sure if all\n    //iframes have completed loading when this code runs. The\n    //event listener also catches the page changing in the iFrame.\n    function init(msg) {\n      function iFrameLoaded() {\n        trigger('iFrame.onload', msg, iframe, undefined , true);\n        checkReset();\n      }\n\n      addEventListener(iframe,'load',iFrameLoaded);\n      trigger('init', msg, iframe, undefined, true);\n    }\n\n    function checkOptions(options) {\n      if ('object' !== typeof options) {\n        throw new TypeError('Options is not an object');\n      }\n    }\n\n    function copyOptions(options) {\n      for (var option in defaults) {\n        if (defaults.hasOwnProperty(option)) {\n          settings[iframeId][option] = options.hasOwnProperty(option) ? options[option] : defaults[option];\n        }\n      }\n    }\n\n    function getTargetOrigin (remoteHost) {\n      return ('' === remoteHost || 'file://' === remoteHost) ? '*' : remoteHost;\n    }\n\n    function processOptions(options) {\n      options = options || {};\n      settings[iframeId] = {\n        firstRun\t: true,\n        iframe\t\t: iframe,\n        remoteHost\t: iframe.src.split('/').slice(0,3).join('/')\n      };\n\n      checkOptions(options);\n      copyOptions(options);\n\n      if (settings[iframeId]) {\n        settings[iframeId].targetOrigin = true === settings[iframeId].checkOrigin ? getTargetOrigin(settings[iframeId].remoteHost) : '*';\n      }\n    }\n\n    function beenHere() {\n      return (iframeId in settings && 'iFrameResizer' in iframe);\n    }\n\n    var iframeId = ensureHasId(iframe.id);\n\n    if (!beenHere()) {\n      processOptions(options);\n      setScrolling();\n      setLimits();\n      setupBodyMarginValues();\n      init(createOutgoingMsg(iframeId));\n      setupIFrameObject();\n    } else {\n      warn(iframeId,'Ignored iFrame, already setup.');\n    }\n  }\n\n  function debouce(fn,time) {\n    if (null === timer) {\n      timer = setTimeout(function() {\n        timer = null;\n        fn();\n      }, time);\n    }\n  }\n  \n  var frameTimer = {};\n  function debounceFrameEvents(fn,time,frameId) {\n    if (!frameTimer[frameId]) {\n      frameTimer[frameId] = setTimeout(function() {\n        frameTimer[frameId] = null;\n        fn();\n      }, time);\n    }\n  }\n\n  /* istanbul ignore next */  //Not testable in PhantomJS\n  function fixHiddenIFrames() {\n    function checkIFrames() {\n      function checkIFrame(settingId) {\n        function chkDimension(dimension) {\n          return '0px' === (settings[settingId] && settings[settingId].iframe.style[dimension]);\n        }\n\n        function isVisible(el) {\n          return (null !== el.offsetParent);\n        }\n\n        if (settings[settingId] && isVisible(settings[settingId].iframe) && (chkDimension('height') || chkDimension('width'))) {\n          trigger('Visibility change', 'resize', settings[settingId].iframe, settingId);\n        }\n      }\n\n      for (var settingId in settings) {\n        checkIFrame(settingId);\n      }\n    }\n\n    function mutationObserved(mutations) {\n      log('window','Mutation observed: ' + mutations[0].target + ' ' + mutations[0].type);\n      debouce(checkIFrames,16);\n    }\n\n    function createMutationObserver() {\n      var\n        target = document.querySelector('body'),\n\n        config = {\n          attributes            : true,\n          attributeOldValue     : false,\n          characterData         : true,\n          characterDataOldValue : false,\n          childList             : true,\n          subtree               : true\n        },\n\n        observer = new MutationObserver(mutationObserved);\n\n      observer.observe(target, config);\n    }\n\n    var MutationObserver = window.MutationObserver || window.WebKitMutationObserver;\n\n    if (MutationObserver) createMutationObserver();\n  }\n\n\n  function resizeIFrames(event) {\n    function resize() {\n      sendTriggerMsg('Window '+event,'resize');\n    }\n\n    log('window','Trigger event: '+event);\n    debouce(resize,16);\n  }\n\n  /* istanbul ignore next */  //Not testable in PhantomJS\n  function tabVisible() {\n    function resize() {\n      sendTriggerMsg('Tab Visable','resize');\n    }\n\n    if('hidden' !== document.visibilityState) {\n      log('document','Trigger event: Visiblity change');\n      debouce(resize,16);\n    }\n  }\n\n  function sendTriggerMsg(eventName,event) {\n    function isIFrameResizeEnabled(iframeId) {\n      return\tsettings[iframeId] &&\n          'parent' === settings[iframeId].resizeFrom &&\n          settings[iframeId].autoResize &&\n          !settings[iframeId].firstRun;\n    }\n\n    for (var iframeId in settings) {\n      if(isIFrameResizeEnabled(iframeId)) {\n        trigger(eventName, event, document.getElementById(iframeId), iframeId);\n      }\n    }\n  }\n\n  function setupEventListeners() {\n    addEventListener(window,'message',iFrameListener);\n\n    addEventListener(window,'resize', function() {resizeIFrames('resize');});\n\n    addEventListener(document,'visibilitychange',tabVisible);\n    addEventListener(document,'-webkit-visibilitychange',tabVisible); //Andriod 4.4\n    addEventListener(window,'focusin',function() {resizeIFrames('focus');}); //IE8-9\n    addEventListener(window,'focus',function() {resizeIFrames('focus');});\n  }\n\n\n  function factory() {\n    function init(options,element) {\n      function chkType() {\n        if(!element.tagName) {\n          throw new TypeError('Object is not a valid DOM element');\n        } else if ('IFRAME' !== element.tagName.toUpperCase()) {\n          throw new TypeError('Expected <IFRAME> tag, found <'+element.tagName+'>');\n        }\n      }\n\n      if(element) {\n        chkType();\n        setupIFrame(element, options);\n        iFrames.push(element);\n      }\n    }\n\n    function warnDeprecatedOptions(options) {\n      if (options && options.enablePublicMethods) {\n        warn('enablePublicMethods option has been removed, public methods are now always available in the iFrame');\n      }\n    }\n\n    var iFrames;\n\n    setupRequestAnimationFrame();\n    setupEventListeners();\n\n    return function iFrameResizeF(options,target) {\n      iFrames = []; //Only return iFrames past in on this call\n\n      warnDeprecatedOptions(options);\n\n      switch (typeof(target)) {\n      case 'undefined':\n      case 'string':\n        Array.prototype.forEach.call(\n          document.querySelectorAll( target || 'iframe' ),\n          init.bind(undefined, options)\n        );\n        break;\n      case 'object':\n        init(options,target);\n        break;\n      default:\n        throw new TypeError('Unexpected data type ('+typeof(target)+')');\n      }\n\n      return iFrames;\n    };\n  }\n\n  function createJQueryPublicMethod($) {\n    if (!$.fn) {\n      info('','Unable to bind to jQuery, it is not fully loaded.');\n    } else if (!$.fn.iFrameResize) {\n      $.fn.iFrameResize = function $iFrameResizeF(options) {\n        function init(index, element) {\n          setupIFrame(element, options);\n        }\n\n        return this.filter('iframe').each(init).end();\n      };\n    }\n  }\n\n  if (window.jQuery) { createJQueryPublicMethod(window.jQuery); }\n\n  if (typeof define === 'function' && define.amd) {\n    define([],factory);\n  } else if (typeof module === 'object' && typeof module.exports === 'object') { //Node for browserfy\n    module.exports = factory();\n  } else {\n    window.iFrameResize = window.iFrameResize || factory();\n  }\n\n})();","/**\n * Decorates a class or a method by binding all its prototype methods or itself\n * to the calling instance respectively.\n */\nexport default function bindDecorator<T extends Method>(target: object, key: string, descriptor: TypedPropertyDescriptor<T>): TypedPropertyDescriptor<T>;\nexport default function bindDecorator<T extends Constructor<object>>(target: T): T;\nexport default function bindDecorator(target: any, key?: any, descriptor?: any): any {\n    if (!key || !descriptor) {\n        return bindClassDecorator(target);\n    }\n\n    return bindMethodDecorator(target, key, descriptor);\n}\n\n/**\n * Decorates a class by binding all its prototype methods to the calling\n * instance.\n */\nexport function bindClassDecorator<T extends Constructor<object>>(target: T): T {\n    const decoratedTarget = class extends target {};\n\n    Object.getOwnPropertyNames(target.prototype)\n        .forEach(key => {\n            const descriptor = Object.getOwnPropertyDescriptor(target.prototype, key);\n\n            if (!descriptor || key === 'constructor') {\n                return;\n            }\n\n            Object.defineProperty(\n                decoratedTarget.prototype,\n                key,\n                bindMethodDecorator(target.prototype, key, descriptor)\n            );\n        });\n\n    return decoratedTarget;\n}\n\n/**\n * Decorates a method by binding it to the calling instance.\n */\nexport function bindMethodDecorator<T extends Method>(target: object, key: string, descriptor: TypedPropertyDescriptor<T>): TypedPropertyDescriptor<T> {\n    if (typeof descriptor.value !== 'function') {\n        return descriptor;\n    }\n\n    let method: T = descriptor.value;\n\n    return {\n        get() {\n            const boundMethod = method.bind(this);\n\n            Object.defineProperty(this, key, {\n                ...descriptor,\n                value: boundMethod,\n            });\n\n            return boundMethod;\n        },\n        set(value) {\n            method = value;\n        },\n    };\n}\n\nexport type Constructor<T> = new (...args: any[]) => T;\nexport type Method = (...args: any[]) => any;\n","import StandardError from './standard-error';\n\nexport default class InvalidArgumentError extends StandardError {\n    constructor(message?: string) {\n        super(message || 'Invalid arguments have been provided.');\n\n        this.type = 'invalid_argument';\n    }\n}\n","import { setPrototypeOf } from '../../utility';\n\nimport CustomError from './custom-error';\n\nexport default class StandardError extends Error implements CustomError {\n    type = 'standard';\n\n    constructor(message?: string) {\n        super(message || 'An unexpected error has occurred.');\n\n        setPrototypeOf(this, new.target.prototype);\n\n        if (typeof Error.captureStackTrace === 'function') {\n            Error.captureStackTrace(this, new.target);\n        } else {\n            this.stack = (new Error(this.message)).stack;\n        }\n    }\n}\n","export default function setPrototypeOf(object: any, prototype: object) {\n    if (Object.setPrototypeOf) {\n        Object.setPrototypeOf(object, prototype);\n    } else {\n        object.__proto__ = prototype;\n    }\n\n    return object;\n}\n","import { InvalidArgumentError } from '../common/error/errors';\n\nexport default function parseOrigin(url: string): string {\n    if (!/^(https?:)?\\/\\//.test(url)) {\n        throw new InvalidArgumentError('The provided URL must be absolute.');\n    }\n\n    // new URL() is not supported in IE11, use anchor tag instead\n    const anchor = document.createElement('a');\n\n    anchor.href = url;\n\n    return `${anchor.protocol}//${anchor.hostname}` + (anchor.port ? `:${anchor.port}` : '');\n}\n","import IframeEvent from './iframe-event';\n\nexport default function isIframeEvent<TEvent extends IframeEvent<TType>, TType extends string>(\n    object: any,\n    type: TType\n): object is TEvent {\n    return object.type === type;\n}\n"],"sourceRoot":""}